import{r as V,d as P,e as u,o as i,c as b,a,g as n,t as x,l as g,i as s,F as E,h as r,m as T,N as I,v as q,x as H,j as m,n as U,E as K}from"./index.193ff21d.js";import{e as Q,s as W,f as X,g as Y}from"./store.83cfdc9e.js";import{a as Z,s as ee}from"./blocks.a7684095.js";import{u as le}from"./upload.b10ece16.js";import{m as J}from"./multiselector.e3a63f5d.js";import{m as ae}from"./my.f8f02874.js";import{_ as te}from"./user.4d579c29.js";import"./weixin.864acb91.js";import"./chat.b31cc7ff.js";const c=w=>(q("data-v-3bae136f"),w=w(),H(),w),se={class:"main w pt10"},oe={class:"round-edge pd10 bgf"},ne=c(()=>n("h3",{class:"center mt20"},"\u5546\u5BB6\u5165\u9A7B\u7533\u8BF7",-1)),de={class:"apply"},ie={key:0,class:"center pd10 mb20 remark l-h17"},ue=m("\u4E2A\u4EBA"),re=m("\u4F01\u4E1A/\u4E2A\u4F53\u6237/\u4E8B\u4E1A\u5355\u4F4D"),_e=c(()=>n("p",{class:"f-gray f-12 ml20"},"\u6CE8\uFF1A\u4E3B\u4F53\u7C7B\u578B\u8BBE\u7F6E\u540E\u65E0\u6CD5\u66F4\u6539",-1)),ce={class:"ml20 mt10 f-gray f-13",style:{width:"calc(100% - 20px)"}},me={class:"mr20"},pe={class:"mr20"},fe=c(()=>n("p",{class:"ml20"},null,-1)),ve=c(()=>n("span",{class:"f-gray ml10"},"\u5982\uFF1A\u7F8E\u52A0\u7F8E(\u671D\u9633\u5E97)",-1)),ye={key:0},be=["src"],ge=c(()=>n("p",{class:"f-gray f-13 ml10 l-h17"},"\u8BF7\u4E0A\u4F20\u4F01\u4E1A\u8425\u4E1A\u6267\u7167\u626B\u63CF\u4EF6",-1)),he={key:0},ke=["src"],Ve=c(()=>n("p",{class:"f-gray f-13 ml10 l-h17"},[m("\u8BF7\u4E0A\u4F20\u672C\u4EBA\uFF08\u6CD5\u4EBA\uFF09"),n("br"),m("\u7684\u8EAB\u4EFD\u8BC1\u4EF6\uFF08\u6B63\u9762\uFF09")],-1)),we={key:0},xe=["src"],Ue=c(()=>n("p",{class:"f-gray f-13 ml10 l-h17"},[m("\u8BF7\u4E0A\u4F20\u672C\u4EBA\uFF08\u6CD5\u4EBA\uFF09"),n("br"),m("\u7684\u8EAB\u4EFD\u8BC1\u4EF6\uFF08\u53CD\u9762\uFF09")],-1)),Ce=c(()=>n("p",{class:"ml20"},null,-1)),Fe=m(" \u63D0\u4EA4\u5BA1\u6838 "),Se={setup(w){const z=V(!1),h=V({}),p=V([]),f=V({}),e=V({stype:"personal"});P(()=>{Q(null,o=>{p.value=o.list||[],o.list.length>0&&(f.value=o.list[0],e.value.sgrade=f.value.id)}),h.value=JSON.parse(localStorage.getItem("visitor")),$({store_id:h.value.userid})});const A=()=>{e.value.stype=="personal"&&(e.value.contacter=e.value.owner),X(e.value,o=>{K.success(o.state==1?"\u60A8\u7684\u5E97\u94FA\u5DF2\u5F00\u901A":"\u60A8\u7684\u5F00\u5E97\u7533\u8BF7\u5DF2\u63D0\u4EA4\uFF0C\u5F85\u5E73\u53F0\u5BA1\u6838\u540E\u5F00\u901A\uFF01"),$(o)},z)},B=(o,l)=>{e.value[l]=o.id},C=(o,l)=>{le(o.raw,{store_id:h.value.userid,folder:"identity/"},v=>{e.value[l]=v.fileUrl})},F=o=>{e.value[o]=""},L=o=>{for(let l=0;l<p.value.length;l++)p.value[l].id==o&&(f.value=p.value[l])},O=()=>{ee(null,o=>{(!o||!o.store_allow)&&U("/message/result","warn","\u5546\u5BB6\u5165\u9A7B","\u6682\u4E0D\u5F00\u653E\u5546\u5BB6\u5165\u9A7B")})};function $(o){W(o,l=>{l?l.state==0?U("/message/result","clock","\u5E97\u94FA\u5BA1\u6838\u4E2D",l.apply_remark):l.state==1?(h.value.store_id=l.store_id,localStorage.setItem("visitor",JSON.stringify(h.value)),U("/message/result?redirect=/seller/index","success","\u5E97\u94FA\u5DF2\u5F00\u901A","\u606D\u559C\uFF01\u60A8\u7684\u5E97\u94FA\u5DF2\u5F00\u901A\uFF0C\u60A8\u53EF\u4EE5\u53D1\u5E03\u5546\u54C1\u53CA\u552E\u5356\u4E86")):l.state==2?U("/message/result","fail","\u5E97\u94FA\u5DF2\u88AB\u5173\u95ED",l.close_reason):l.state==3&&(e.value=l,Y(null,v=>{let k=["owner","identity_card","identity_front","identity_back","business_license"];for(let d in k)e.value[k[d]]=v[k[d]]})):O()})}return(o,l)=>{const v=u("el-radio"),k=u("el-radio-group"),d=u("el-form-item"),R=u("el-option"),j=u("el-select"),_=u("el-input"),S=u("close-bold"),y=u("el-icon"),M=u("plus"),N=u("el-upload"),D=u("el-button"),G=u("el-form");return i(),b(E,null,[a(ae),n("div",se,[n("div",oe,[ne,n("div",de,[e.value.apply_remark&&e.value.state==3?(i(),b("div",ie," \u60A8\u7684\u5E97\u94FA\u672A\u901A\u8FC7\u5BA1\u6838\uFF0C"+x(e.value.apply_remark),1)):g("",!0),a(G,null,{default:s(()=>[a(d,{label:"\u4E3B\u4F53\uFF1A","label-width":250},{default:s(()=>[a(k,{modelValue:e.value.stype,"onUpdate:modelValue":l[0]||(l[0]=t=>e.value.stype=t),class:"ml20"},{default:s(()=>[a(v,{label:"personal",disabled:e.value.store_id>0,size:"large",border:"",style:{padding:"0 60px"}},{default:s(()=>[ue]),_:1},8,["disabled"]),a(v,{label:"company",disabled:e.value.store_id>0,size:"large",border:"",style:{padding:"0 60px"}},{default:s(()=>[re]),_:1},8,["disabled"])]),_:1},8,["modelValue"])]),_:1}),a(d,{label:" ","label-width":250},{default:s(()=>[_e]),_:1}),p.value.length>0?(i(),r(d,{key:0,label:"\u5E97\u94FA\u7B49\u7EA7\uFF1A","label-width":250},{default:s(()=>[a(j,{modelValue:e.value.sgrade,"onUpdate:modelValue":l[1]||(l[1]=t=>e.value.sgrade=t),onChange:L,class:"ml20"},{default:s(()=>[(i(!0),b(E,null,T(p.value,t=>(i(),r(R,{label:t.name,value:t.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),n("p",ce,[n("span",me,"\u53D1\u5E03\u5546\u54C1\u6570\u9650\u5236\uFF1A"+x(f.value.goods_limit||"\u4E0D\u9650\u5236")+"\u4EF6",1),n("span",pe,"\u56FE\u7247\u7A7A\u95F4\u91CF\u9650\u5236\uFF1A"+x(f.value.space_limit)+"MB",1),n("span",null,x(f.value.description),1)])]),_:1})):g("",!0),a(d,{label:"\u6240\u5C5E\u5206\u7C7B\uFF1A","label-width":250},{default:s(()=>[fe,a(J,{api:"scategory/list",idField:"cate_id",nameField:"cate_name",parentField:"parent_id",original:e.value.category,onCallback:l[2]||(l[2]=t=>{B(t,"cate_id")})},null,8,["original"])]),_:1}),a(d,{label:"\u5E97\u94FA\u540D\u79F0\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.store_name,"onUpdate:modelValue":l[3]||(l[3]=t=>e.value.store_name=t),class:"ml20"},null,8,["modelValue"]),ve]),_:1}),e.value.stype=="company"?(i(),r(d,{key:1,label:"\u4E3B\u4F53\u540D\u79F0\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.owner,"onUpdate:modelValue":l[4]||(l[4]=t=>e.value.owner=t),class:"ml20",placeholder:"\u4F01\u4E8B\u4E1A\u5355\u4F4D\u540D\u79F0"},null,8,["modelValue"])]),_:1})):(i(),r(d,{key:2,label:"\u5E97\u957F\u59D3\u540D\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.owner,"onUpdate:modelValue":l[5]||(l[5]=t=>e.value.owner=t),class:"ml20",placeholder:"\u771F\u5B9E\u59D3\u540D"},null,8,["modelValue"])]),_:1})),e.value.stype=="personal"?(i(),r(d,{key:3,label:"\u8EAB\u4EFD\u8BC1\u53F7\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.identity_card,"onUpdate:modelValue":l[6]||(l[6]=t=>e.value.identity_card=t),class:"ml20"},null,8,["modelValue"])]),_:1})):g("",!0),e.value.stype=="company"?(i(),r(d,{key:4,label:"\u7EDF\u4E00\u793E\u4F1A\u4FE1\u7528\u4EE3\u7801\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.identity_card,"onUpdate:modelValue":l[7]||(l[7]=t=>e.value.identity_card=t),class:"ml20"},null,8,["modelValue"])]),_:1})):g("",!0),e.value.stype=="company"?(i(),r(d,{key:5,label:"\u5DE5\u5546\u8425\u4E1A\u6267\u7167\uFF1A","label-width":250},{default:s(()=>[a(N,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{C(t,"business_license")},class:"ml20 relative"},{default:s(()=>[e.value.business_license?(i(),b("p",ye,[n("img",{src:e.value.business_license+"?t="+Math.random()},null,8,be),a(y,{onClick:l[8]||(l[8]=I(t=>F("business_license"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(i(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),ge]),_:1},8,["on-change"])]),_:1})):g("",!0),a(d,{label:"\u8EAB\u4EFD\u8BC1\u4EF6\uFF1A","label-width":250},{default:s(()=>[a(N,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{C(t,"identity_front")},class:"ml20 relative"},{default:s(()=>[e.value.identity_front?(i(),b("p",he,[n("img",{src:e.value.identity_front+"?t="+Math.random()},null,8,ke),a(y,{onClick:l[9]||(l[9]=I(t=>F("identity_front"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(i(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),Ve]),_:1},8,["on-change"]),a(N,{action:"#","show-file-list":!1,"auto-upload":!1,"on-change":t=>{C(t,"identity_back")},class:"ml20 relative"},{default:s(()=>[e.value.identity_back?(i(),b("p",we,[n("img",{src:e.value.identity_back+"?t="+Math.random()},null,8,xe),a(y,{onClick:l[10]||(l[10]=I(t=>F("identity_back"),["stop"])),class:"absolute remove",color:"#ffffff"},{default:s(()=>[a(S)]),_:1})])):(i(),r(y,{key:1,class:"add",size:20},{default:s(()=>[a(M)]),_:1})),Ue]),_:1},8,["on-change"])]),_:1}),e.value.stype=="company"?(i(),r(d,{key:6,label:"\u8054\u7CFB\u4EBA\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.contacter,"onUpdate:modelValue":l[11]||(l[11]=t=>e.value.contacter=t),class:"ml20"},null,8,["modelValue"])]),_:1})):g("",!0),a(d,{label:"\u8054\u7CFB\u624B\u673A\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.phone,"onUpdate:modelValue":l[12]||(l[12]=t=>e.value.phone=t),class:"ml20"},null,8,["modelValue"])]),_:1}),a(d,{label:"\u6240\u5728\u5730\u533A\uFF1A","label-width":250},{default:s(()=>[Ce,a(J,{api:"region/list",idField:"region_id",nameField:"name",parentField:"parent_id",original:[e.value.province,e.value.city,e.value.district],onCallback:l[13]||(l[13]=t=>{B(t,"region_id")})},null,8,["original"])]),_:1}),a(d,{label:"\u8BE6\u7EC6\u5730\u5740\uFF1A","label-width":250},{default:s(()=>[a(_,{modelValue:e.value.address,"onUpdate:modelValue":l[14]||(l[14]=t=>e.value.address=t),class:"ml20"},null,8,["modelValue"])]),_:1}),a(d,{label:" ","label-width":250,class:"pt10"},{default:s(()=>[a(D,{onClick:A,type:"primary",class:"mt20 ml20",loading:z.value},{default:s(()=>[Fe]),_:1},8,["loading"])]),_:1})]),_:1})])])]),a(te)],64)}}};var Le=Z(Se,[["__scopeId","data-v-3bae136f"]]);export{Le as default};
