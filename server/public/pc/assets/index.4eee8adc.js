import{_ as J}from"./cart_empty.ba3c6efa.js";import{r as q,y as N,d as Q,e as h,f as W,o as _,c as r,a as e,g as l,i as s,w as X,k as f,F as I,m as O,l as x,h as $,j as u,t as m,C as y,v as Y,x as Z,V as ee,I as te,n as se,E as B}from"./index.193ff21d.js";import{a as le,b as ae,d as oe,e as M}from"./cart.90659698.js";import{a as ce,g as ne}from"./blocks.a7684095.js";import{d as ie}from"./favorite.6d80988c.js";import{_ as de}from"./home.5fee7488.js";import{_ as _e}from"./home.85f29f3b.js";import"./chat.b31cc7ff.js";const g=C=>(Y("data-v-3557509c"),C=C(),Z(),C),re={class:"main bgf"},ue={class:"w",style:{"padding-top":"20px"}},pe={style:{"min-height":"100px"}},fe={key:0,class:"cartbox mt20 f-13"},me={class:"hd mb20"},he=u("\u9009\u62E9"),ve=u("\u5E97\u94FA\u5546\u54C1"),ge=u("\u4EF7\u683C"),be=u("\u6570\u91CF"),ke=u("\u5C0F\u8BA1"),xe=u("\u64CD\u4F5C"),ye={class:"bd"},Ve={class:"list mb10"},we=g(()=>l("label",null,"\u5E97\u94FA\uFF1A",-1)),Ce={key:0,class:"ml20"},Ie={class:"ml10"},Ue={class:"item"},je=["src"],Oe={class:"desc mr10 pt5 pb5 f-14"},Be={key:0,class:"f-gray f-12 mt5"},Ee=["onClick"],Fe=["onClick"],qe={class:"fd"},Ne=g(()=>l("label",null,"\u5168\u9009",-1)),$e=g(()=>l("label",null,"\u603B\u8BA1\uFF1A",-1)),Me={class:"mr20 f-17 f-red"},Se=u(" \u786E\u8BA4\u5E76\u63D0\u4EA4\u8BA2\u5355"),ze={key:0,class:"empty uni-flex uni-row flex-middle"},De=g(()=>l("p",{class:"pd10"},[l("img",{src:J,width:"83"})],-1)),Le={class:"ml20"},Pe=g(()=>l("p",{class:"bold mb20"},"\u60A8\u7684\u8D2D\u7269\u8F66\u662F\u7A7A\u7684\uFF0C\u60A8\u53EF\u4EE5",-1)),Te=u("\u9009\u8D2D\u5546\u54C1"),Ge=g(()=>l("span",{class:"f-simsun"},">>",-1)),Ke={class:"w"},Re={key:0,class:"pt10 pb10 gallery"},Ae=g(()=>l("div",{class:"hd flex-middle center"},[l("h3",{class:"f-20 f-yahei pl20 pr20 relative"},"\u53D1\u73B0\u597D\u7269")],-1)),He=["src"],Je={class:"price pd10 mb10 mt5 center"},Qe={key:0},We={class:"del mr20 f-gray"},Xe={class:"f-red"},Ye={key:1,class:"f-red"},Ze={setup(C){const U=q(!0),o=N({amount:0,checkall:!1,list:[],settle:0}),j=q([]),S=N({gtype:"material"});Q(()=>{le(S,t=>{o.list=t.list||{},V()},U),ne({page_size:6},t=>{j.value=t.list})});const z=t=>{ae({spec_id:t.spec_id,quantity:t.quantity},c=>{c&&(B.success("\u6570\u91CF\u5DF2\u4FEE\u6539"),V())})},D=t=>{oe({product_id:t.product_id},c=>{delete o.list[t.store_id].items[t.product_id],Object.values(o.list[t.store_id].items).length==0&&delete o.list[t.store_id],V()})},L=()=>{if(o.settle>0){let t=[];return Object.values(o.list).forEach(c=>{Object.values(c.items).forEach(n=>{n.selected==1&&t.push(n.gtype)})}),ee(t).length>1?te.alert("\u5B9E\u7269\u5546\u54C1\u548C\u865A\u62DF\u670D\u52A1\u7C7B\u5546\u54C1\u56E0\u7ED3\u7B97\u5468\u671F\u4E0D\u540C\uFF0C\u4E0D\u652F\u6301\u4E00\u8D77\u7ED3\u7B97\uFF0C\u8BF7\u91CD\u65B0\u9009\u62E9\u7ED3\u7B97\u5546\u54C1","\u63D0\u793A",{confirmButtonText:"OK"}):se("/cashier/order/normal")}B.warning("\u8BF7\u9009\u62E9\u5546\u54C1\u7ED3\u7B97")},P=(t,c)=>{ie({goods_id:t},n=>{B.success("\u6536\u85CF\u6210\u529F")})};function V(){o.checkall=!0,o.settle=0,o.amount=0;let t=o.list;for(let c in t){t[c].checkall=!0;for(let n in t[c].items)t[c].items[n].selected==1?(o.settle++,o.amount+=parseFloat(t[c].items[n].subtotal)):(o.checkall=!1,t[c].checkall=!1)}}function T(t,c,n){let b=o.list[t].items;M({product_ids:c,selected:n},a=>{for(let p in c)b[c[p]].selected=n;V()})}function E(t){let c=[],n=o.list,b=(t?o.list[t].checkall:o.checkall)?1:0;for(let a in n)if(!(t&&a!=t))for(let p in n[a].items)c.push(p);M({product_ids:c,selected:b},a=>{if(a){for(let p in n)if(!(t&&p!=t))for(let w in n[p].items)n[p].items[w].selected=Number(b);V()}})}return(t,c)=>{const n=h("el-step"),b=h("el-steps"),a=h("el-col"),p=h("el-row"),w=h("el-checkbox"),k=h("router-link"),G=h("el-tag"),K=h("el-input-number"),R=h("el-button"),A=W("loading");return _(),r(I,null,[e(de,{exclude:["category","imagead"]}),l("div",re,[l("div",ue,[e(b,{active:0,"finish-status":"success","process-status":"process",simple:""},{default:s(()=>[e(n,{title:"\u9009\u62E9\u5546\u54C1\u7ED3\u7B97"}),e(n,{title:"\u786E\u8BA4\u8BA2\u5355\u4FE1\u606F"}),e(n,{title:"\u4ED8\u6B3E"}),e(n,{title:"\u786E\u8BA4\u6536\u8D27"}),e(n,{title:"\u8BC4\u4EF7"})]),_:1}),X((_(),r("div",pe,[Object.values(f(o).list).length>0?(_(),r("div",fe,[l("div",me,[e(p,{class:"center"},{default:s(()=>[e(a,{span:1},{default:s(()=>[he]),_:1}),e(a,{span:10},{default:s(()=>[ve]),_:1}),e(a,{span:3},{default:s(()=>[ge]),_:1}),e(a,{span:3},{default:s(()=>[be]),_:1}),e(a,{span:3},{default:s(()=>[ke]),_:1}),e(a,{span:4},{default:s(()=>[xe]),_:1})]),_:1})]),l("div",ye,[(_(!0),r(I,null,O(f(o).list,(i,F)=>(_(),r("div",Ve,[Object.values(i.items).length>0?(_(),$(p,{key:0,class:"pt10 pb10"},{default:s(()=>[e(a,{span:1,class:"center flex-middle"},{default:s(()=>[e(w,{modelValue:i.checkall,"onUpdate:modelValue":d=>i.checkall=d,onChange:d=>{E(F)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),e(a,{span:23,class:"uni-flex uni-row flex-middle"},{default:s(()=>[we,e(k,{to:"/store/index/"+i.store_id,class:"rlink f-blue"},{default:s(()=>[u(m(i.store_name),1)]),_:2},1032,["to"]),i.storeFullPreferInfo?(_(),r("p",Ce,[e(G,{type:"warning"},{default:s(()=>[u(m(i.storeFullPreferInfo.prefer.label),1)]),_:2},1024),l("span",Ie,m(i.storeFullPreferInfo.text),1)])):x("",!0)]),_:2},1024)]),_:2},1024)):x("",!0),(_(!0),r(I,null,O(i.items,(d,H)=>(_(),r("div",Ue,[e(p,{class:"flex-middle"},{default:s(()=>[e(a,{span:1,class:"center"},{default:s(()=>[e(w,{modelValue:d.selected,"onUpdate:modelValue":v=>d.selected=v,"true-label":1,"false-label":0,onChange:v=>{T(F,[H],d.selected)}},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024),e(a,{span:10,class:"uni-flex uni-row flex-middle"},{default:s(()=>[e(k,{to:"/goods/detail/"+d.goods_id,class:"pic mr10 pt5 pb5"},{default:s(()=>[l("img",{width:"70",height:"70",src:d.goods_image},null,8,je)]),_:2},1032,["to"]),l("div",Oe,[e(k,{to:"/goods/detail/"+d.goods_id,class:"rlink"},{default:s(()=>[u(m(d.goods_name),1)]),_:2},1032,["to"]),d.specification?(_(),r("p",Be,m(d.specification),1)):x("",!0)])]),_:2},1024),e(a,{span:3,class:"center f-red"},{default:s(()=>[u(m(f(y)(d.price)),1)]),_:2},1024),e(a,{span:3,class:"center"},{default:s(()=>[e(K,{onChange:v=>z(d),modelValue:d.quantity,"onUpdate:modelValue":v=>d.quantity=v,size:"small",min:1,max:d.stock},null,8,["onChange","modelValue","onUpdate:modelValue","max"])]),_:2},1024),e(a,{span:3,class:"center f-red f-14"},{default:s(()=>[u(m(f(y)(d.subtotal)),1)]),_:2},1024),e(a,{span:4,class:"center f-blue"},{default:s(()=>[l("p",{onClick:v=>P(d.goods_id),class:"mb5 pointer"},"\u52A0\u5165\u6536\u85CF\u5939",8,Ee),l("p",{onClick:v=>D(d),class:"pointer"},"\u79FB\u9664",8,Fe)]),_:2},1024)]),_:2},1024)]))),256))]))),256))]),l("div",qe,[e(p,{class:"pt10 pb10 mt10"},{default:s(()=>[e(a,{span:1,class:"center flex-middle"},{default:s(()=>[e(w,{modelValue:f(o).checkall,"onUpdate:modelValue":c[0]||(c[0]=i=>f(o).checkall=i),onChange:c[1]||(c[1]=i=>{E()})},null,8,["modelValue"])]),_:1}),e(a,{span:2,class:"uni-flex uni-row flex-middle"},{default:s(()=>[Ne]),_:1}),e(a,{span:21,class:"vertical-middle flex-end f-15"},{default:s(()=>[$e,l("span",Me,m(f(y)(f(o).amount)),1),e(R,{onClick:L,type:"primary",size:"large",class:"mr10"},{default:s(()=>[Se]),_:1})]),_:1})]),_:1})])])):x("",!0)])),[[A,U.value]]),!U.value&&Object.values(f(o).list).length==0?(_(),r("div",ze,[De,l("div",Le,[Pe,e(k,{to:"/",class:"rlink f-blue f-13 f-yahei"},{default:s(()=>[Te,Ge]),_:1})])])):x("",!0)]),l("div",Ke,[j.value.length>0?(_(),r("div",Re,[Ae,e(p,{gutter:20,class:"uni-flex uni-row bd mb20"},{default:s(()=>[(_(!0),r(I,null,O(j.value,i=>(_(),$(a,{span:4,class:"item"},{default:s(()=>[e(k,{to:"/goods/detail/"+i.goods_id,class:"pic block rlink"},{default:s(()=>[l("img",{src:i.default_image},null,8,He)]),_:2},1032,["to"]),e(k,{to:"/goods/detail/"+i.goods_id,class:"desc mt10 line-clamp-2 f-13 rlink"},{default:s(()=>[u(m(i.goods_name),1)]),_:2},1032,["to"]),l("div",Je,[i.promotion?(_(),r("p",Qe,[l("label",We,m(f(y)(i.price)),1),l("span",Xe,m(f(y)(i.promotion.price)),1)])):(_(),r("p",Ye,m(f(y)(i.price)),1))])]),_:2},1024))),256))]),_:1})])):x("",!0)])]),e(_e)],64)}}};var it=ce(Ze,[["__scopeId","data-v-3557509c"]]);export{it as default};
