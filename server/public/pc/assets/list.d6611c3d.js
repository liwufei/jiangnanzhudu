import{r as h,d as G,A as L,e as o,o as d,h as m,i as l,a as e,l as F,j as b,t as q,E as H,y as ae,u as te,f as oe,c as D,g as w,F as se,k as r,w as ne,C as de,n as ie,I as re}from"./index.193ff21d.js";import{a as K,c as ce,d as Q,e as _e,f as ue}from"./blocks.a7684095.js";import{m as pe}from"./seller.b9776ff6.js";import{_ as me}from"./user.4d579c29.js";import{m as fe}from"./seller.c6d1e739.js";import{m as ge}from"./multiselector.e3a63f5d.js";import"./weixin.864acb91.js";import"./chat.b31cc7ff.js";const be=b(" \u9ED8\u8BA4\u89C4\u683C "),ve=b("\u5173\u95ED"),we=b("\u63D0\u4EA4"),he={props:{title:{type:String,default:""},visible:{type:Boolean,default:!1},data:{type:[Object,Array],default:()=>({})}},emits:["close"],setup(O,{emit:N}){const c=O,f=h(!1),n=h(!1),k=h([]),_=h({});G(()=>{S()}),L(()=>c.visible,V=>{f.value=V}),L(()=>c.data,V=>{S()});const S=()=>{_.value=c.data,ce({goods_id:_.value.goods_id},V=>{k.value=V.list||[]})},j=()=>{Q({goods_id:_.value.goods_id,spec_qty:_.value.spec_qty,spec_name_1:_.value.spec_name_1,spec_name_2:_.value.spec_name_2,specs:k.value},V=>{H.success("\u4FEE\u6539\u6210\u529F");let g=0;k.value.forEach(v=>{g+=Number(v.stock)}),N("close",{price:k.value[0].price,stocks:g})},n)},y=()=>{N("close",null)};return(V,g)=>{const v=o("el-table-column"),B=o("el-input"),P=o("el-table"),M=o("el-form-item"),T=o("el-form"),z=o("el-button"),s=o("el-dialog");return d(),m(s,{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=t=>f.value=t),title:O.title,width:750,center:!0,draggable:!0,"destroy-on-close":!0,"close-on-click-modal":!1,"before-close":y},{footer:l(()=>[e(z,{onClick:y},{default:l(()=>[ve]),_:1}),e(z,{type:"primary",onClick:j,loading:n.value},{default:l(()=>[we]),_:1},8,["loading"])]),default:l(()=>[e(T,null,{default:l(()=>[e(M,null,{default:l(()=>[e(P,{ref:"multipleTableRef",data:k.value,border:!0,stripe:!1,"max-height":"767",size:"small","header-cell-style":{background:"#f3f8fe"}},{default:l(()=>[_.value.spec_qty==0?(d(),m(v,{key:0,label:"\u89C4\u683C",width:"100"},{default:l(t=>[be]),_:1})):F("",!0),_.value.spec_name_1?(d(),m(v,{key:1,label:_.value.spec_name_1,width:"100"},{default:l(t=>[b(q(t.row.spec_1),1)]),_:1},8,["label"])):F("",!0),_.value.spec_name_2?(d(),m(v,{key:2,label:_.value.spec_name_2,width:"100"},{default:l(t=>[b(q(t.row.spec_2),1)]),_:1},8,["label"])):F("",!0),e(v,{label:"\u5212\u7EBF\u4EF7(\u5143)",width:"140"},{default:l(t=>[e(B,{modelValue:t.row.mkprice,"onUpdate:modelValue":u=>t.row.mkprice=u,class:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(v,{label:"\u552E\u4EF7(\u5143)",width:"140"},{default:l(t=>[e(B,{modelValue:t.row.price,"onUpdate:modelValue":u=>t.row.price=u,class:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(v,{prop:"stock",label:"\u5E93\u5B58",width:"140"},{default:l(t=>[e(B,{modelValue:t.row.stock,"onUpdate:modelValue":u=>t.row.stock=u,class:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(v,{prop:"weight",label:"\u91CD\u91CF(kg)",width:"140"},{default:l(t=>[e(B,{modelValue:t.row.weight,"onUpdate:modelValue":u=>t.row.weight=u,class:"small"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1},8,["modelValue","title"])}}};var ke=K(he,[["__scopeId","data-v-9e4596e2"]]);const ye={class:"main w pt10"},Ve={class:"round-edge pd10 bgf"},Ce={class:"pd10"},xe=b("\u5546\u54C1"),ze=b("\u5546\u54C1\u7BA1\u7406"),$e={class:"round-edge pl20 pr20 pt20 pb20 bgf mt20"},Ue={class:"block"},Se=b("\u67E5\u8BE2"),Be=["src"],Fe={class:"l-h17"},Ne={key:0,class:"l-h17"},je={class:"f-yahei"},qe={class:"flex-center"},Ee={class:"flex-center"},Ie={key:1},De={class:"flex-center"},Oe=b("\u6539\u4EF7 "),Pe=b("\u7F16\u8F91 "),Me=b("\u5220\u9664 "),Te={key:0,class:"mt20 mb20"},Ae={setup(O){const N=h(!1),c=h([]),f=h({}),n=ae({orderby:"add_time|desc"}),k=h({}),_=te(),S=h(!1),j=h(0);G(()=>{k.value=JSON.parse(localStorage.getItem("visitor"))});const y=()=>{z()},V=s=>{n.cate_id=s.id,z(_.query)},g=(s,t,u)=>{Q({goods_id:c.value[s].goods_id,[t]:u},A=>{c.value[s][t]=u})},v=s=>{re.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u5546\u54C1\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",type:"warning"}).then(()=>{_e({goods_id:c.value[s].goods_id},()=>{H.success("\u5220\u9664\u6210\u529F\uFF01"),c.value.splice(s,1)})}).catch(()=>{})},B=s=>{S.value=!0,j.value=s},P=s=>{S.value=!1,Object.assign(c.value[j.value],s||{})},M=s=>{z({page_size:s})},T=s=>{z({page:s,page_size:f.value.page_size})};function z(s){ue(Object.assign(n,s,{store_id:k.value.store_id}),t=>{c.value=t.list,f.value=t.pagination},N)}return(s,t)=>{const u=o("el-col"),A=o("el-breadcrumb-item"),W=o("el-breadcrumb"),C=o("el-form-item"),p=o("el-option"),E=o("el-select"),R=o("el-input"),I=o("el-button"),X=o("el-form"),i=o("el-table-column"),J=o("router-link"),$=o("SuccessFilled"),U=o("el-icon"),Y=o("el-table"),Z=o("el-pagination"),ee=o("el-row"),le=oe("loading");return d(),D(se,null,[e(pe),w("div",ye,[e(ee,{gutter:12},{default:l(()=>[e(u,{span:4},{default:l(()=>[e(fe)]),_:1}),e(u,{span:20},{default:l(()=>[w("div",Ve,[w("div",Ce,[e(W,{separator:"/"},{default:l(()=>[e(A,null,{default:l(()=>[xe]),_:1}),e(A,null,{default:l(()=>[ze]),_:1})]),_:1})])]),w("div",$e,[e(X,{inline:!0,class:"mb10"},{default:l(()=>[e(C,{label:"\u5546\u54C1\u7C7B\u76EE"},{default:l(()=>[e(ge,{api:"category/list",idField:"cate_id",nameField:"cate_name",parentField:"parent_id",placeholder:!0,onCallback:V})]),_:1}),e(C,{label:"\u63A8\u8350\u72B6\u6001"},{default:l(()=>[e(E,{modelValue:r(n).recommended,"onUpdate:modelValue":t[0]||(t[0]=a=>r(n).recommended=a),onChange:y,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(p,{label:"\u5DF2\u63A8\u8350\u7684\u5546\u54C1",value:"1"}),e(p,{label:"\u672A\u63A8\u8350\u7684\u5546\u54C1",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u4E0A\u67B6\u72B6\u6001"},{default:l(()=>[e(E,{modelValue:r(n).if_show,"onUpdate:modelValue":t[1]||(t[1]=a=>r(n).if_show=a),onChange:y,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(p,{label:"\u4E0A\u67B6\u4E2D",value:"1"}),e(p,{label:"\u5DF2\u4E0B\u67B6",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u7981\u552E\u72B6\u6001"},{default:l(()=>[e(E,{modelValue:r(n).closed,"onUpdate:modelValue":t[2]||(t[2]=a=>r(n).closed=a),onChange:y,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(p,{label:"\u6B63\u5E38",value:"0"}),e(p,{label:"\u7981\u552E\u4E2D",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u5546\u54C1\u6392\u5E8F"},{default:l(()=>[e(E,{modelValue:r(n).orderby,"onUpdate:modelValue":t[3]||(t[3]=a=>r(n).orderby=a),onChange:y,placeholder:"\u4E0D\u9650\u5236",clearable:""},{default:l(()=>[e(p,{label:"\u9500\u91CF\u4ECE\u9AD8\u5230\u4F4E",value:"sales|desc"}),e(p,{label:"\u70B9\u51FB\u91CF\u4ECE\u9AD8\u5230\u4F4E",value:"views|desc"}),e(p,{label:"\u4EF7\u683C\u4ECE\u9AD8\u5230\u4F4E",value:"price|desc"}),e(p,{label:"\u4EF7\u683C\u4ECE\u4F4E\u5230\u9AD8",value:"price|asc"}),e(p,{label:"\u4E0A\u67B6\u65F6\u95F4\u4ECE\u8FD1\u5230\u8FDC",value:"add_time|desc"}),e(p,{label:"\u4E0A\u67B6\u65F6\u95F4\u4ECE\u8FDC\u5230\u8FD1",value:"add_time|asc"}),e(p,{label:"\u8BC4\u8BBA\u6570\u4ECE\u591A\u5230\u5C11",value:"comments|desc"})]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"\u5546\u54C1\u540D\u79F0"},{default:l(()=>[e(R,{modelValue:r(n).keyword,"onUpdate:modelValue":t[4]||(t[4]=a=>r(n).keyword=a),clearable:""},null,8,["modelValue"])]),_:1}),w("div",Ue,[e(C,{label:"\u5546\u54C1\u54C1\u724C"},{default:l(()=>[e(R,{modelValue:r(n).brand,"onUpdate:modelValue":t[5]||(t[5]=a=>r(n).brand=a),clearable:""},null,8,["modelValue"])]),_:1}),e(C,null,{default:l(()=>[e(I,{onClick:y,type:"primary",class:"f-13"},{default:l(()=>[Se]),_:1})]),_:1})])]),_:1}),ne((d(),m(Y,{data:c.value,border:!1,stripe:!1,size:"large","header-cell-style":{background:"#f3f8fe"}},{default:l(()=>[e(i,{type:"selection"}),e(i,{width:"70",label:"\u56FE\u7247",align:"center",fixed:"left"},{default:l(a=>[e(J,{to:"/goods/detail/"+a.row.goods_id,class:"rlink"},{default:l(()=>[w("img",{src:a.row.default_image,width:"50",height:"50"},null,8,Be)]),_:2},1032,["to"])]),_:1}),e(i,{label:"\u5546\u54C1\u540D\u79F0",width:"300"},{default:l(a=>[w("p",Fe,[e(J,{to:"/goods/detail/"+a.row.goods_id,class:"rlink"},{default:l(()=>[b(q(a.row.goods_name),1)]),_:2},1032,["to"])])]),_:1}),e(i,{prop:"category",label:"\u6240\u5728\u5206\u7C7B",width:"200"},{default:l(a=>[a.row.category?(d(),D("p",Ne,q(a.row.category.join(" / ")),1)):F("",!0)]),_:1}),e(i,{prop:"price",label:"\u4EF7\u683C",width:"150",align:"center"},{default:l(a=>[w("strong",je,q(r(de)(a.row.price)),1)]),_:1}),e(i,{prop:"stocks",label:"\u5E93\u5B58",width:"100",sortable:""}),e(i,{prop:"if_show",label:"\u4E0A\u67B6",width:"60",align:"center"},{default:l(a=>[w("div",qe,[a.row.if_show==1?(d(),m(U,{key:0,onClick:x=>g(a.$index,"if_show",a.row.if_show==1?0:1),class:"f-green pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"])):(d(),m(U,{key:1,onClick:x=>g(a.$index,"if_show",a.row.if_show==1?0:1),class:"f-gray pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"]))])]),_:1}),e(i,{prop:"recommended",label:"\u63A8\u8350",width:"100",align:"center"},{default:l(a=>[w("div",Ee,[a.row.recommended==1?(d(),m(U,{key:0,onClick:x=>g(a.$index,"recommended",a.row.recommended==1?0:1),class:"f-green pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"])):(d(),m(U,{key:1,onClick:x=>g(a.$index,"recommended",a.row.recommended==1?0:1),class:"f-gray pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"]))])]),_:1}),e(i,{prop:"closed",label:"\u7981\u552E",width:"100",align:"center"},{default:l(a=>[a.row.closed==1?(d(),m(U,{key:0,class:"f-c60",size:16},{default:l(()=>[e($)]),_:1})):(d(),D("span",Ie))]),_:1}),e(i,{prop:"isnew",label:"\u65B0\u54C1",width:"60",align:"center"},{default:l(a=>[w("div",De,[a.row.isnew==1?(d(),m(U,{key:0,onClick:x=>g(a.$index,"isnew",a.row.isnew==1?0:1),class:"f-green pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"])):(d(),m(U,{key:1,onClick:x=>g(a.$index,"isnew",a.row.isnew==1?0:1),class:"f-gray pointer",size:16},{default:l(()=>[e($)]),_:2},1032,["onClick"]))])]),_:1}),e(i,{prop:"brand",label:"\u54C1\u724C",width:"100",sortable:""}),e(i,{prop:"sales",label:"\u9500\u91CF",width:"100",align:"center",sortable:""}),e(i,{prop:"collects",label:"\u6536\u85CF",width:"100",align:"center",sortable:""}),e(i,{prop:"views",label:"\u4EBA\u6C14",width:"100",align:"center",sortable:""}),e(i,{prop:"add_time",label:"\u4E0A\u67B6\u65F6\u95F4",width:"120",sortable:""}),e(i,{fixed:"right",label:"\u64CD\u4F5C",width:"200",align:"center"},{default:l(a=>[e(I,{type:"danger",size:"small",onClick:x=>B(a.$index),plain:""},{default:l(()=>[Oe]),_:2},1032,["onClick"]),e(I,{type:"primary",size:"small",onClick:x=>r(ie)("/seller/goods/build/"+a.row.goods_id),plain:""},{default:l(()=>[Pe]),_:2},1032,["onClick"]),e(I,{type:"warning",size:"small",onClick:x=>v(a.$index),plain:""},{default:l(()=>[Me]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[le,N.value]]),f.value.total>0?(d(),D("div",Te,[e(Z,{currentPage:f.value.page,"onUpdate:currentPage":t[6]||(t[6]=a=>f.value.page=a),"page-size":f.value.page_size,"onUpdate:page-size":t[7]||(t[7]=a=>f.value.page_size=a),"page-sizes":[10,50,100,200],background:!1,layout:"total, sizes, prev, pager, next",total:f.value.total,onSizeChange:M,onCurrentChange:T,"hide-on-single-page":!1,class:"center"},null,8,["currentPage","page-size","total"])])):F("",!0)])]),_:1})]),_:1})]),c.value.length>0?(d(),m(ke,{key:0,title:"\u6539\u4EF7",visible:S.value,data:c.value[j.value],onClose:P},null,8,["visible","data"])):F("",!0),e(me)],64)}}};var Xe=K(Ae,[["__scopeId","data-v-209a13c6"]]);export{Xe as default};
