import{u as T,r as I,y as x,d as G,e as o,o as w,c as V,a as e,g as n,i as t,k as r,F as J,h as K,t as h,l as L,j as f,E as S,v as P,x as Q,H as U,M as j}from"./index.193ff21d.js";import{a as X,h as Y,c as Z}from"./blocks.a7684095.js";import{a as ee,b as te,c as le}from"./teambuy.eb114b07.js";import{s as oe}from"./list.1db9be99.js";import{m as se}from"./seller.b9776ff6.js";import{_ as ae}from"./user.4d579c29.js";import{m as ie}from"./seller.c6d1e739.js";import"./multiselector.e3a63f5d.js";import"./weixin.864acb91.js";import"./chat.b31cc7ff.js";const B=v=>(P("data-v-56e175b6"),v=v(),Q(),v),ne={class:"main w pt10"},de={class:"round-edge pd10 bgf"},ce={class:"pd10"},_e=f("\u8425\u9500"),ue=f("\u62FC\u56E2"),re={class:"round-edge pd10 bgf mt20"},pe=B(()=>n("h3",{class:"pd10 mb20"},"\u62FC\u56E2\u8BBE\u7F6E",-1)),me={key:0},fe={key:1},be={class:"uni-flex uni-row"},ge=["src"],he={class:"l-h20 width-surplus ml10"},ve={class:"tips pl10 pr10 pt5 pb5 f-12 f-c60 flex-middle",style:{width:"100%"}},we=f(" \u62FC\u56E2\u4EF7\u53EA\u652F\u6301\u8BBE\u7F6E\u6298\u6263\u4F18\u60E0\uFF0C\u53D6\u503C(0.01-9.99) "),ye=B(()=>n("text",{class:"ml20 mr20"},"\u63D0\u4EA4",-1)),xe={setup(v){const k=T(),y=I(!1),u=x({visible:!1,selected:[]}),_=x({title:"\u62FC\u56E2",people:2}),p=x({list:[]}),d=I({});G(()=>{k.params.id>0&&ee({id:k.params.id},s=>{s&&(Object.assign(_,s),u.selected=[parseInt(_.goods_id)],C())})});const E=()=>{if(p.list.length<1)return S.warning("\u8BF7\u9009\u62E9\u5546\u54C1");let s={};for(let a in p.list){let i=p.list[a];if(s[i.spec_id]={},i.discount&&Number(i.discount)>0&&Number(i.discount)<10)s[i.spec_id].discount=Number(i.discount);else return S.warning("\u62FC\u56E2\u6298\u6263\u8BBE\u7F6E\u4E0D\u5408\u7406\uFF0C\u8BF7\u68C0\u67E5\uFF01")}_.id>0?te(Object.assign(_,{specs:s,goods_id:d.value.goods_id}),a=>{U({title:"\u63D0\u793A",message:"\u62FC\u56E2\u8BBE\u7F6E\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:function(){j.replace("/seller/teambuy/list")}})},y):le(Object.assign(_,{specs:s,goods_id:d.value.goods_id}),a=>{U({title:"\u63D0\u793A",message:"\u62FC\u56E2\u5546\u54C1\u6DFB\u52A0\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:function(){j.replace("/seller/teambuy/list")}})},y)},q=s=>{u.visible=!1,u.selected=s||[],u.selected.length>0&&C()};function C(){Y({goods_id:u.selected[u.selected.length-1]},s=>{d.value=s,Z({goods_id:s.goods_id},a=>{for(let i in a.list){let c=a.list[i];p.list[i]={specification:c.spec_1+" "+c.spec_2,price:c.price,stock:c.stock,image:c.image,spec_id:c.spec_id};let b=_.specs;b&&b[c.spec_id]&&(p.list[i].discount=b[c.spec_id].discount)}})})}return(s,a)=>{const i=o("el-col"),c=o("el-breadcrumb-item"),b=o("el-breadcrumb"),M=o("el-input"),m=o("el-form-item"),N=o("el-option"),O=o("el-select"),F=o("el-button"),R=o("WarningFilled"),W=o("el-icon"),g=o("el-table-column"),$=o("el-input-number"),z=o("el-table"),A=o("el-form"),D=o("el-row");return w(),V(J,null,[e(se),n("div",ne,[e(D,{gutter:12},{default:t(()=>[e(i,{span:4},{default:t(()=>[e(ie)]),_:1}),e(i,{span:20},{default:t(()=>[n("div",de,[n("div",ce,[e(b,{separator:"/"},{default:t(()=>[e(c,null,{default:t(()=>[_e]),_:1}),e(c,null,{default:t(()=>[ue]),_:1})]),_:1})])]),n("div",re,[pe,e(A,{inline:!0,class:"pd10"},{default:t(()=>[e(m,{label:"\u62FC\u56E2\u6807\u9898","label-width":100},{default:t(()=>[e(M,{modelValue:r(_).title,"onUpdate:modelValue":a[0]||(a[0]=l=>r(_).title=l),clearable:""},null,8,["modelValue"])]),_:1}),e(m,{label:"\u6210\u56E2\u4EBA\u6570","label-width":100},{default:t(()=>[e(O,{modelValue:r(_).people,"onUpdate:modelValue":a[1]||(a[1]=l=>r(_).people=l)},{default:t(()=>[e(N,{label:"2\u4EBA\u56E2",value:2}),e(N,{label:"3\u4EBA\u56E2",value:3})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"\u9009\u62E9\u5546\u54C1","label-width":100},{default:t(()=>[e(F,{onClick:a[2]||(a[2]=l=>r(u).visible=!0),type:"primary",plain:""},{default:t(()=>[d.value.goods_id?(w(),V("text",me,"\u91CD\u65B0\u9009\u62E9\u5546\u54C1")):(w(),V("text",fe,"\u9009\u62E9\u5546\u54C1"))]),_:1})]),_:1}),d.value.goods_id?(w(),K(m,{key:0,label:" ","label-width":100},{default:t(()=>[n("div",be,[n("p",null,[n("img",{src:d.value.default_image,width:"60",height:"60"},null,8,ge)]),n("p",he,h(d.value.goods_name),1)])]),_:1})):L("",!0),e(m,{label:" ","label-width":100,style:{"margin-right":"0"}},{default:t(()=>[n("p",ve,[e(W,{size:14,class:"mr5"},{default:t(()=>[e(R)]),_:1}),we]),e(z,{data:r(p).list,border:!0,stripe:!0,"header-cell-style":{background:"#f3f8fe"}},{default:t(()=>[e(g,{label:d.value.spec_qty>0?d.value.spec_name_1+" "+d.value.spec_name_2||"":"\u89C4\u683C"},{default:t(l=>[n("text",null,h(d.value.spec_qty>0?l.row.specification:"\u9ED8\u8BA4\u89C4\u683C"),1)]),_:1},8,["label"]),e(g,{label:"\u5E93\u5B58",width:"100"},{default:t(l=>[f(h(l.row.stock),1)]),_:1}),e(g,{label:"\u539F\u4EF7",width:"100"},{default:t(l=>[f(h(l.row.price),1)]),_:1}),e(g,{label:"\u62FC\u56E2\u4EF7",width:"100"},{default:t(l=>[f(h((l.row.price*(l.row.discount||10)*.1).toFixed(2)),1)]),_:1}),e(g,{label:"\u6298\u6263",width:"170"},{default:t(l=>[e($,{modelValue:l.row.discount,"onUpdate:modelValue":H=>l.row.discount=H,"controls-position":"right",step:.01,min:.01,max:9.99},null,8,["modelValue","onUpdate:modelValue","step","min","max"])]),_:1})]),_:1},8,["data"])]),_:1}),e(m,{label:" ","label-width":100,class:"mt10"},{default:t(()=>[e(F,{type:"primary",onClick:E,loading:y.value},{default:t(()=>[ye]),_:1},8,["loading"])]),_:1})]),_:1})])]),_:1})]),_:1})]),e(oe,{title:"\u9009\u62E9\u5546\u54C1",visible:r(u).visible,onClose:q,selected:r(u).selected,limit:1},null,8,["visible","selected"]),e(ae)],64)}}};var Ee=X(xe,[["__scopeId","data-v-56e175b6"]]);export{Ee as default};
