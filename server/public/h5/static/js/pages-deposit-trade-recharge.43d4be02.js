(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-deposit-trade-recharge"],{"0b34":function(e,t,n){var a=n("8770");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("b41cbac0",a,!0,{sourceMap:!1,shadowMode:!1})},1019:function(e,t,n){"use strict";var a=n("f5bd").default;n("aa9c"),n("5ef2");var i=a(n("2634")),o=a(n("2fdc")),r=a(n("0ed1")),s=a(n("ac89"));function u(){return u=(0,o.default)((0,i.default)().mark((function e(t,n){return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.delay>0&&t.delay<5)){e.next=2;break}return e.abrupt("return");case 2:t.delay++,r.default.request("deposit/recharge",{callback:s.default.payCallback(t.form.payment_code),terminal:"WAP",money:t.form.money,payment_code:t.form.payment_code,fundtype:t.form.fundtype||"money"},(function(e){console.log(t.form),0==e.code?e.data.redirect?location.href=e.data.redirect:uni.requestPayment({provider:t.form.payment_code,success:function(t){"function"==typeof n?n():uni.redirectTo({url:"/pages/cashier/trade/result?payTradeNo="+e.data.payTradeNo})},fail:function(e){var t="支付失败";e.errMsg.indexOf("requestPayment:fail")>-1&&(t=e.errMsg.indexOf("cancel")>-1?"已取消支付":e.errMsg),uni.showModal({title:"提示",content:t,showCancel:!1})}}):uni.showModal({title:"提示",content:e.message,showCancel:!1})}));case 4:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}e.exports={submit:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id recharge.js 2019.11.4 $
 * @author winder
 */
function(e,t){return u.apply(this,arguments)},settings:function(e){r.default.request("recharge/setting",null,(function(t){0==t.code&&(e.recharges=t.data||[],t.data.length>0&&(e.form.money=t.data[0].money))}))},getPayments:function(e){e.payments=[{code:"wxpay",name:"微信支付"}],s.default.isWechat()||e.payments.push({code:"alipay",name:"支付宝"}),e.payment=e.payments[0]}}},1059:function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"uniPopupDialog",props:{title:{type:String,default:"充值方式"},beforeClose:{type:Boolean,default:!1},payments:{type:Array,default:function(){return[]}},selected:{type:Object,default:function(){return{}}}},data:function(){return{payment:{}}},inject:["popup"],created:function(){this.popup.mkclick=!0},methods:{confirm:function(e,t){var n=this;this.payment=t,this.$emit("confirm",(function(){n.popup.close()}),this.payment)},close:function(){var e=this;this.beforeClose?this.$emit("close",(function(){e.popup.close()})):this.popup.close()}}};t.default=a},"1bcf":function(e,t,n){"use strict";n.r(t);var a=n("3d72"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"3ac1":function(e,t,n){"use strict";n.r(t);var a=n("1059"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},"3d72":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("ac89")),o=a(n("1019")),r={data:function(){return{recharges:[],payments:[],payment:{},form:{money:100,fundtype:"money",payment_code:""},delay:0}},methods:{showPopup:function(e,t){return this.$refs[t].open()},submit:function(){this.form.payment_code=this.payment.code,o.default.submit(this)},close:function(e){e()},confirm:function(e,t){this.payment=t,e()}},onLoad:function(e){i.default.verifyLogin(!0,this.$mp.page.route)&&(o.default.getPayments(this),o.default.settings(this))}};t.default=r},"54bf":function(e,t,n){"use strict";var a=n("0b34"),i=n.n(a);i.a},7071:function(e,t,n){"use strict";n.r(t);var a=n("ce93"),i=n("1bcf");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("54bf");var r=n("828b"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"3219c08e",null,!1,a["a"],void 0);t["default"]=s.exports},8770:function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".wraper[data-v-3219c08e]{box-shadow:%?0?% %?0?% %?30?% %?0?% #e8e8e8}.bank[data-v-3219c08e]{padding:%?60?%;background-color:#f6f6f7}.recharges .item[data-v-3219c08e]{min-width:%?114?%;border-radius:%?6?%;border:%?2?% #f1f1ff solid;background-color:#fafafa;margin:%?30?% %?30?% %?0?% 0;padding:%?30?%}.recharges .item.selected[data-v-3219c08e]{border-color:var(--color-red);background-color:#fff9f8}.money uni-text[data-v-3219c08e]{font-size:%?60?%}.money uni-input[data-v-3219c08e]{font-size:%?80?%;height:%?80?%}.mybutton[data-v-3219c08e]{margin-top:%?50?%;border-radius:%?16?%}",""]),e.exports=t},"9f50":function(e,t,n){"use strict";n.r(t);var a=n("d870"),i=n("3ac1");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var r=n("828b"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);t["default"]=s.exports},ce93:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("ea5d").default,uniPopup:n("d1df").default,myPopupPayment:n("9f50").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"wraper ml10 mr10 mt10"},[n("v-uni-view",{staticClass:"uni-flex uni-row width-between bank"},[n("v-uni-text",{staticClass:"f-15 mr10"},[e._v("支付通道")]),n("v-uni-view",{staticClass:"uni-flex uni-row width-surplus",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPopup(t,"payment")}}},[n("v-uni-view",{staticClass:"uni-flex uni-column width-surplus ml10"},[n("v-uni-view",[n("v-uni-text",{class:["iconfont f-15",e.payment.code]}),n("v-uni-text",{staticClass:"ml5 f-15"},[e._v(e._s(e.payment.name))])],1),n("v-uni-text",{staticClass:"f-gray"},[e._v("充值即时到账")])],1),n("uni-icons",{attrs:{type:"arrowright",color:"gray"}})],1)],1),n("v-uni-view",{staticClass:"pd10 bgf",staticStyle:{padding:"40rpx"}},[n("v-uni-text",[e._v("充值金额")]),e.recharges.length>0?n("v-uni-view",{staticClass:"uni-flex flex-wrap recharges"},e._l(e.recharges,(function(t,a){return n("v-uni-view",{key:a,class:["item uni-center",e.form.money==t.money?"selected":""],on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.form.money=t.money}}},[n("p",{staticClass:"uni-bold f-17 f-red"},[e._v(e._s(parseFloat(t.money))+"元")]),t.reward>0?n("v-uni-text",{staticClass:"f-gray f-12"},[e._v("送"+e._s(parseFloat(t.reward||0))+"元")]):e._e()],1)})),1):n("v-uni-view",{staticClass:"uni-flex uni-row pt10 pb10 flex-middle money"},[n("v-uni-text",{staticClass:"uni-bold mr10 mt10"},[e._v("￥")]),n("v-uni-input",{staticClass:"width-surplus uni-bold mt10",attrs:{type:"digit",maxlength:"10"},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1),n("v-uni-view",{staticClass:"f-white pd10 uni-center f-16 mt10 mb10 uni-bold mybutton",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确认充值")])],1),n("uni-popup",{ref:"payment",attrs:{type:"bottom"}},[n("my-popup-payment",{attrs:{payments:e.payments,selected:e.payment},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}})],1)],1)],1)},o=[]},d870:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("ea5d").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"bgf pt5"},[n("uni-icons",{staticClass:"ml10 absolute pt5",attrs:{type:"closeempty",size:"44",color:"gray"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"uni-center f-16 pt10"},[e._v(e._s(e.title))]),n("v-uni-view",{staticClass:"f-gray f-13 uni-center pb10"},[e._v("充值限额以各平台为准")]),n("v-uni-scroll-view",{staticStyle:{height:"600rpx"},attrs:{"scroll-x":!1,"scroll-y":!0}},[e._l(e.payments,(function(t,a){return n("v-uni-view",{key:a,staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt flex-middle width-between",on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.confirm(n,t)}}},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-16"},[n("v-uni-text",{class:["iconfont",t.code],staticStyle:{"font-size":"60rpx"}}),n("v-uni-text",{staticClass:"ml10"},[e._v(e._s(t.name))])],1),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:e.selected.code==t.code,expression:"selected.code == item.code"}],staticClass:"mr10 f-red",attrs:{type:"checkmarkempty",size:"40",color:""}})],1)})),n("v-uni-view",{staticClass:"bt pb10"})],2)],1)],1)},o=[]}}]);