(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-seller-store-location"],{"13cb":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".textright[data-v-dcea6932]{text-align:right}",""]),t.exports=e},"1bd4":function(t,e,i){"use strict";var n=i("3d6e"),a=i.n(n);a.a},"3d6e":function(t,e,i){var n=i("13cb");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("916f3350",n,!0,{sourceMap:!1,shadowMode:!1})},4792:function(t,e,i){"use strict";i.r(e);var n=i("630c"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"630c":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2634")),s=n(i("2fdc")),l=n(i("ac89")),u=n(i("809a")),r=(n(i("62a0")),{data:function(){return{store:{},localities:{list:[],selected:0},regions:[],multiIndex:[0,0,0],selected:"请选择"}},methods:{change:function(t){this.localities.selected=t.detail.value,this.store.deliveryCode=this.localities.list[this.localities.selected].code},columnchange:function(t){this.multiIndex[t.detail.column]=t.detail.value,0==t.detail.column?this.multiIndex=[t.detail.value,0,0]:1==t.detail.column&&(this.multiIndex[2]=0),u.default.regions(this)},save:function(){u.default.save(this)},location:function(){var t=this;return(0,s.default)((0,a.default)().mark((function e(){var i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t,uni.chooseLocation({latitude:i.store.latitude,longitude:i.store.longitude,success:function(t){i.store.latitude=t.latitude,i.store.longitude=t.longitude}});case 2:case"end":return e.stop()}}),e)})))()}},onLoad:function(t){if(l.default.verifyLogin(!0,this.$mp.page.route)){if(!l.default.verifySeller())return l.default.redirect("/pages/seller/store/apply");u.default.store(this)}}});e.default=r},"76bb":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("ea5d").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"uni-flex uni-column bgf round-edge ml10 mr10 mt10"},[t.localities.list.length>0?i("v-uni-view",{staticClass:"uni-flex uni-row bt width-between pd10 flex-middle f-16"},[i("v-uni-text",{staticClass:"mr10"},[t._v("配送方式")]),i("v-uni-view",{staticClass:"uni-flex uni-row width-surplus flex-middle f-16 textright"},[i("v-uni-picker",{staticClass:"width-surplus",attrs:{mode:"selector",range:t.localities.list,value:t.localities.selected,"range-key":"name"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.change.apply(void 0,arguments)}}},[t._v(t._s(t.localities.list[t.localities.selected].name||"请选择"))]),i("uni-icons",{attrs:{type:"arrowright"}})],1)],1):t._e(),i("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle flex-middle f-16"},[i("v-uni-text",{staticClass:"mr10"},[t._v("所在地区")]),i("v-uni-view",{staticClass:"uni-flex uni-row width-surplus flex-middle f-16 textright"},[i("v-uni-picker",{staticClass:"width-surplus line-clamp-1",attrs:{mode:"multiSelector","range-key":"name",value:t.multiIndex,range:t.regions},on:{columnchange:function(e){arguments[0]=e=t.$handleEvent(e),t.columnchange.apply(void 0,arguments)}}},[t._v(t._s(t.selected))]),i("uni-icons",{attrs:{type:"arrowright"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle flex-middle f-16"},[i("v-uni-text",{staticClass:"mr10"},[t._v("详细地址")]),i("v-uni-view",{staticClass:"uni-flex uni-row width-surplus flex-middle f-16 textright"},[i("v-uni-input",{staticClass:"width-surplus",attrs:{placeholder:"街道门牌信息"},model:{value:t.store.address,callback:function(e){t.$set(t.store,"address",e)},expression:"store.address"}}),i("uni-icons",{attrs:{type:"arrowright",color:"gray"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16 width-between"},[i("v-uni-label",[t._v("位置坐标")]),i("uni-icons",{attrs:{type:"location"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.location.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle flex-middle f-16"},[i("v-uni-text",{staticClass:"mr10"},[t._v("配送距离")]),i("v-uni-view",{staticClass:"uni-flex uni-row width-surplus flex-middle f-16 textright"},[i("v-uni-input",{staticClass:"width-surplus pl10 pr10",attrs:{placeholder:"配送距离(公里)"},model:{value:t.store.radius,callback:function(e){t.$set(t.store,"radius",e)},expression:"store.radius"}}),i("v-uni-text",[t._v("公里")])],1)],1)],1),i("v-uni-view",{staticClass:"pd10"},[i("v-uni-view",{staticClass:"mybutton f-white f-16 mt10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save.apply(void 0,arguments)}}},[t._v("保存提交")])],1)],1)},s=[]},"809a":function(t,e,i){"use strict";var n=i("f5bd").default;i("bf0f"),i("2797");var a=n(i("2634")),s=n(i("2fdc")),l=n(i("0ed1")),u=n(i("d760"));function r(t){return o.apply(this,arguments)}function o(){return o=(0,s.default)((0,a.default)().mark((function t(e){var i,n,s=arguments;return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=s.length>1&&void 0!==s[1]?s[1]:null,t.next=3,u.default.build(e.multiIndex,i);case 3:n=t.sent,e.store.region_id=n.id,e.selected=n.label.join(" / "),e.regions=n.multiList;case 7:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}t.exports={store:function(t){var e=uni.getStorageSync("visitor")||{};l.default.request("store/read",{store_id:e.store_id},(function(e){if(0==e.code){["store_id","deliveryCode","region_id","address","radius","latitude","longitude"].forEach((function(i){t.store[i]=e.data[i]}));var i=e.data?[e.data.province,e.data.city,e.data.district]:null;r(t,i),l.default.request("delivery/types",{category:"locality"},(function(e){0==e.code&&(t.localities.list=e.data||[],t.localities.list.forEach((function(e,i){e.code==t.store.deliveryCode&&(t.localities.selected=i)})))}))}}))},regions:r,save:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id location.js 2020.1.19 $
 * @author winder
 */
function(t){l.default.request("store/update",t.store,(function(t){0==t.code?uni.showModal({content:"门店信息修改成功",showCancel:!1,success:function(){uni.navigateBack()}}):t.message&&uni.showToast({title:t.message,icon:"none"})}))}}},c519:function(t,e,i){"use strict";i.r(e);var n=i("76bb"),a=i("4792");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("1bd4");var l=i("828b"),u=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"dcea6932",null,!1,n["a"],void 0);e["default"]=u.exports},d760:function(t,e,i){"use strict";var n=i("f5bd").default;i("e966"),i("bf0f"),i("2797"),i("aa9c"),i("dd2b");var a=n(i("39d8")),s=n(i("2634")),l=n(i("2fdc")),u=n(i("0ed1")),r=n(i("ac89"));function o(){return o=(0,l.default)((0,s.default)().mark((function t(e){var i,n,a,l,u,r,o=arguments;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=o.length>1&&void 0!==o[1]?o[1]:null,n=o.length>2&&void 0!==o[2]?o[2]:"region/list",a=o.length>3&&void 0!==o[3]?o[3]:"region_id",l=o.length>4&&void 0!==o[4]?o[4]:"name",u=o.length>5&&void 0!==o[5]?o[5]:"parent_id",t.next=7,d(e,i,n,a,l,u);case 7:return r=t.sent,t.abrupt("return",v(r,e,a,l));case 9:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function d(t,e,i,n,a,s){return c.apply(this,arguments)}function c(){return c=(0,l.default)((0,s.default)().mark((function t(e,i,n,l,o,c){var v,p,h,g=arguments;return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return p=g.length>6&&void 0!==g[6]?g[6]:[],h=g.length>7&&void 0!==g[7]?g[7]:0,r.default.isEmpty(e[h-1])&&(e[h-1]=0),t.next=5,u.default.promise(n,(v={},(0,a.default)(v,c,h>0?p[h-1].list[e[h-1]][l]:0),(0,a.default)(v,"if_show",1),(0,a.default)(v,"page_size",1e3),v));case 5:if(p[h]=t.sent,!(p[h].list.length>0)){t.next=9;break}return r.default.isEmpty(i)||f(p[h].list,e,i[h],o,h),t.abrupt("return",d(e,i,n,l,o,c,p,++h));case 9:return t.abrupt("return",p.length>0?p.splice(0,p.length-1):p);case 10:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}function f(t,e,i,n,a){if(!r.default.isEmpty(i))for(var s in t)t[s][n]==i&&(e[a]=parseInt(s))}function v(t,e,i,n){var a=[],s=[];t.forEach((function(t,i){a[i]=t.list[e[i]][n],s[i]=t.list}));for(var l=t.length;l<e.length;l++)s.push([]);return{id:s[a.length-1][e[a.length-1]][i],label:a,multiList:s}}t.exports={build:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id selector.js 2019.10.19 $
 * @author winder
 */
function(t){return o.apply(this,arguments)}}}}]);