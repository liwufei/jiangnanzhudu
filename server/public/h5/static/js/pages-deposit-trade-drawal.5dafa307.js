(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-deposit-trade-drawal"],{"0106":function(t,e,n){"use strict";n.r(e);var i=n("7180"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"0137":function(t,e,n){"use strict";var i=n("f5bd").default,a=i(n("2634")),o=i(n("2fdc"));n("aa9c"),n("bf0f"),n("2797");var s=i(n("0ed1")),u=i(n("ac89"));i(n("62a0"));function c(){return c=(0,o.default)((0,a.default)().mark((function t(e,n){return(0,a.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.chooseImage({count:1,sizeType:["compressed"],success:function(t){s.default.upload("upload/file",t.tempFilePaths[0],{folder:"qrcode/drawal/"},(function(t){0==t.code?(e.bank.qrcode=t.data.fileUrl||"",e.$forceUpdate()):uni.showToast({title:t.message,icon:"none"})}))},fail:function(t){uni.showModal({content:t.errMsg,showCancel:!1})}});case 1:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}t.exports={deposit:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id drawal.js 2019.11.4 $
 * @author winder
 */
function(t){s.default.request("deposit/read",null,(function(e){0==e.code&&(t.deposit=e.data)}))},upload:function(t,e){return c.apply(this,arguments)},banks:function(t){var e=uni.getStorageSync("visitor")||{};s.default.request("bank/list",null,(function(n){if(0==n.code){var i=n.data.list||[];i.push({code:"alipay",bank:"支付宝",account:"",name:""},{code:"wxpay",bank:"微信零钱",account:e.openid||"",name:""}),t.bank=i[0],t.banks=i}}))},setting:function(t){s.default.request("deposit/setting",null,(function(e){0==e.code&&(t.setting=e.data||{})}))},submit:function(t,e,n){s.default.request("deposit/drawal",{money:t.money,account:t.bank.account,name:t.bank.name,drawtype:"alipay"!=t.bank.code&&"wxpay"!=t.bank.code?"bank":t.bank.code,bank:t.bank.bank,password:e,qrcode:t.bank.qrcode||""},(function(t){0==t.code?(uni.showModal({title:"提现申请提交成功",content:"平台审核通过后，将在24小时内将提现金额打入到您指定的账户中，请耐心等待！",showCancel:!1,success:function(){uni.navigateTo({url:"/pages/deposit/index/index"})}}),"function"==typeof n&&n()):uni.showToast({title:t.message,icon:"none"})}))},connect:function(t,e){s.default.request("auth/connect",Object.assign(e,{callback:u.default.siteUrl()+"/pages/login/callback"}),(function(t){0==t.code&&t.data&&(uni.setStorageSync("redirect",u.default.getUrl()),location.href=t.data.redirect)}))},siteinfo:function(t){s.default.request("site/read",null,(function(e){0==e.code&&(t.siteinfo=e.data||{})}))}}},"10ad":function(t,e,n){"use strict";n.r(e);var i=n("72f3"),a=n("0106");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("58f5");var s=n("828b"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"0d24ea9e",null,!1,i["a"],void 0);e["default"]=u.exports},"22b8":function(t,e,n){"use strict";n.r(e);var i=n("81b4"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"24f6":function(t,e,n){"use strict";n.r(e);var i=n("df4d"),a=n("57e4");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("bbff");var s=n("828b"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"bca31c6a",null,!1,i["a"],void 0);e["default"]=u.exports},"4f31":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniIcons:n("ea5d").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"bgf pt5"},[n("uni-icons",{staticClass:"ml10 absolute pt5",attrs:{type:"closeempty",size:"44",color:"gray"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-view",{class:["uni-center f-16 pt10",t.desc?"":"pb10"]},[t._v(t._s(t.title))]),t.desc?n("v-uni-view",{staticClass:"f-gray f-13 uni-center pb10"},[t._v(t._s(t.desc))]):t._e(),n("v-uni-scroll-view",{staticStyle:{height:"700rpx"},attrs:{"scroll-x":!1,"scroll-y":!0}},[t._l(t.banks,(function(e,i){return n("v-uni-view",{key:i,staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt flex-middle width-between",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.confirm(n,e)}}},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-16"},[n("v-uni-text",{class:["iconfont",e.code],staticStyle:{"font-size":"60rpx"}}),n("v-uni-text",{staticClass:"mr10 ml10"},[t._v(t._s(e.bank))]),e.account&&"wxpay"!=e.code?n("v-uni-text",[t._v("("+t._s(e.account)+")")]):t._e()],1),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.selected.code==e.code&&t.selected.account==e.account,expression:"selected.code == item.code && selected.account == item.account"}],staticClass:"mr10",attrs:{type:"checkmarkempty",size:"40",color:"#fc2b34"}})],1)})),t.showAdd?n("v-uni-navigator",{staticClass:"pd10 bt mg5",attrs:{url:"/pages/my/bank/build?redirect="+t.redirect,"hover-class":"none"}},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle f-16 pd5"},[t._v("添加提现银行卡")])],1):t._e()],2)],1)],1)},o=[]},"57e4":function(t,e,n){"use strict";n.r(e);var i=n("62c4"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"58f5":function(t,e,n){"use strict";var i=n("69cf"),a=n.n(i);a.a},"62c4":function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uniPopupDialog",props:{title:{type:String,default:"确认支付"},confimText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},beforeClose:{type:Boolean,default:!1}},data:function(){return{password:""}},inject:["popup"],created:function(){this.popup.mkclick=!1},methods:{confirm:function(){var t=this;this.$emit("confirm",(function(){t.popup.close()}),this.password)},close:function(){var t=this;this.beforeClose?this.$emit("close",(function(){t.popup.close()})):this.popup.close()},cancel:function(){var t=this;this.$emit("cancel",(function(){t.popup.close()}))},clearInput:function(t,e){this.password=""}}};e.default=i},"69cf":function(t,e,n){var i=n("b868");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("046a941d",i,!0,{sourceMap:!1,shadowMode:!1})},7180:function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("64aa");var a=i(n("ac89")),o=i(n("0137")),s={data:function(){return{siteinfo:{},banks:[],bank:{},setting:{},deposit:{money:0},money:100}},methods:{drawal:function(){this.money=this.deposit.money-this.deposit.nodrawal},upload:function(t){o.default.upload(this,t)},submit:function(){var t=this;if("wxpay"!=this.bank.code||""!=this.bank.account)if(a.default.isEmpty(this.bank.name)||a.default.isEmpty(this.bank.account))uni.showModal({content:"提现账户有误",showCancel:!1});else if(this.deposit.money-this.deposit.nodrawal<=0)uni.showModal({content:"没有余额，无法提现",showCancel:!1});else if(Number(this.money)<=0)uni.showModal({content:"提现金额有误",showCancel:!1});else{if(!(Number(this.money)>Number(this.deposit.money-this.deposit.nodrawal)))return this.$refs.pay.open();uni.showModal({content:"最多能提现"+(this.deposit.money-this.deposit.nodrawal)+"元",showCancel:!1})}else uni.showModal({content:"提现至微信零钱需要先授权",confirmText:"去授权",success:function(e){e.confirm&&o.default.connect(t,{logintype:"weixin"})}})},cancel:function(t){a.default.redirect("/pages/deposit/setting/pay")},confirm:function(t,e){this.bank=e,t()},payment:function(t,e){o.default.submit(this,e,(function(){t()}))},showPopup:function(t,e){return this.$refs[e].open()},closePopup:function(t,e){return this.$refs[e].close()}},onLoad:function(t){a.default.verifyLogin(!0,this.$mp.page.route)&&(o.default.deposit(this),o.default.banks(this),o.default.setting(this),o.default.siteinfo(this))}};e.default=s},"72f3":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniIcons:n("ea5d").default,uniPopup:n("d1df").default,myPopupBank:n("d9d8").default,myPopupPay:n("24f6").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"wraper ml10 mr10 mt10"},[n("v-uni-view",{staticClass:"uni-flex uni-row width-between bank"},[n("v-uni-text",{staticClass:"f-15 mr10"},[t._v("提现到")]),t.banks.length>0?n("v-uni-view",{staticClass:"uni-flex uni-row width-surplus",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPopup(e,"bank")}}},[n("v-uni-view",{staticClass:"uni-flex uni-column width-surplus ml10"},[n("v-uni-view",{staticClass:"uni-flex uni-row flex-middle"},[n("v-uni-text",{class:["iconfont f-15",t.bank.code]}),n("v-uni-view",{staticClass:"ml5 f-15"},[n("v-uni-text",[t._v(t._s(t.bank.bank))]),t.bank.account&&"wxpay"!=t.bank.code&&"alipay"!=t.bank.code?n("v-uni-text",[t._v("("+t._s(t.bank.account.slice(-4))+")")]):t._e()],1)],1),n("v-uni-text",{staticClass:"f-gray"},[t._v("24小时内到账")])],1),n("uni-icons",{attrs:{type:"arrowright",color:"gray"}})],1):n("v-uni-navigator",{staticClass:"uni-flex uni-row width-surplus",attrs:{url:"/pages/my/bank/build","hover-class":"none"}},[n("v-uni-view",{staticClass:"uni-flex uni-column width-surplus ml10"},[n("v-uni-text",{staticClass:"f-15"},[t._v("暂无提现银行卡")]),n("v-uni-text",{staticClass:"f-gray"},[t._v("前往设置")])],1),n("uni-icons",{attrs:{type:"arrowright",color:"gray"}})],1)],1),n("v-uni-view",{staticClass:"pd10 bgf"},[n("v-uni-view",{staticClass:"pt10"},["alipay"==t.bank.code?n("v-uni-view",{staticClass:"uni-flex uni-column mb10"},[n("v-uni-text",{staticClass:"ml5"},[t._v("支付宝账户")]),n("v-uni-input",{staticClass:"bgp round-edge pd10 mt10 width-surplus uni-bold",model:{value:t.bank.account,callback:function(e){t.$set(t.bank,"account",e)},expression:"bank.account"}})],1):t._e(),"alipay"==t.bank.code||"wxpay"==t.bank.code?n("v-uni-view",[n("v-uni-view",{staticClass:"uni-flex uni-column mb10"},[n("v-uni-text",{staticClass:"ml5"},[t._v("真实姓名")]),n("v-uni-input",{staticClass:"bgp round-edge pd10 mt10 width-surplus",attrs:{placeholder:"账户实名认证的真实姓名"},model:{value:t.bank.name,callback:function(e){t.$set(t.bank,"name",e)},expression:"bank.name"}})],1),n("v-uni-view",{staticClass:"uni-flex uni-column mb10"},[n("v-uni-view",{staticClass:"mb10"},[n("v-uni-text",{staticClass:"ml5"},[t._v("收款二维码")]),"wxpay"==t.bank.code?n("v-uni-text",{staticClass:"f-red"},[t._v("（必须）")]):t._e()],1),t.bank.qrcode?n("v-uni-image",{staticClass:"ml5 qrcode round-edge",attrs:{src:t.bank.qrcode,mode:"widthFix"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload("qrcode")}}}):n("v-uni-view",{staticClass:"ml5 qrcode vertical-middle f-gray ml5 round-edge",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upload("qrcode")}}},[n("uni-icons",{attrs:{type:"plusempty",size:"50",color:""}})],1)],1)],1):t._e(),n("v-uni-view",{staticClass:"uni-flex uni-column"},[n("v-uni-text",{staticClass:"ml5 uni-bold"},[t._v("提现金额")]),n("v-uni-view",{staticClass:"uni-flex uni-row ml10 pb10 flex-middle money"},[n("v-uni-text",{staticClass:"mt10"},[t._v("￥")]),n("v-uni-input",{staticClass:"width-surplus uni-bold mt10",attrs:{type:"digit",maxlength:"10"},model:{value:t.money,callback:function(e){t.money=e},expression:"money"}})],1),n("v-uni-view",{staticClass:"f-gray ml10 pt10 pb10 bt"},[n("v-uni-text",[t._v("余额 "+t._s(t.deposit.money||"0.00")+"元")]),t.deposit.nodrawal>0?n("v-uni-text",[t._v("，其中"+t._s(t.deposit.nodrawal)+"不可提现")]):t._e(),n("v-uni-text",{staticClass:"f-blue ml10",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.drawal.apply(void 0,arguments)}}},[t._v("全部提现")])],1)],1)],1),n("v-uni-view",{staticClass:"f-white ml10 mr10 pd10 uni-center f-16 mt10 mb10 uni-bold mybutton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("确认提现")])],1),n("uni-popup",{ref:"bank",attrs:{type:"bottom"}},[n("my-popup-bank",{attrs:{banks:t.banks,selected:t.bank},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1),n("uni-popup",{ref:"pay",attrs:{type:"dialog"}},[n("my-popup-pay",{attrs:{title:"提现",cancelText:"忘记密码?"},on:{cancel:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.payment.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-flex uni-column uni-center pd10 ml5 mr5"},[n("p",{staticClass:"uni-bold f-25"},[t._v(t._s(t._f("currency")(t.money)))]),t.setting.drawal_rate>0?n("p",{staticClass:"uni-flex uni-row bt width-between pt5 mt10 f-gray"},[n("v-uni-text",[t._v("手续费")]),n("v-uni-text",[t._v(t._s(t._f("currency")(t.money*(t.setting.drawal_rate||0))))])],1):t._e(),t.setting.drawal_rate>0?n("p",{staticClass:"uni-flex uni-row width-between f-gray"},[n("v-uni-text",[t._v("费率")]),n("v-uni-text",[t._v(t._s(100*(t.setting.drawal_rate||0))+"%")])],1):t._e()])],1)],1)],1),n("v-uni-view",{staticClass:"uni-center pd10 f-gray f-12"},[t._v("客服热线："+t._s(t.siteinfo.site_tel||"18910101019"))])],1)},o=[]},"81b4":function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("ac89")),o={name:"uniPopupDialog",props:{title:{type:String,default:"选择提现到"},desc:{type:String,default:"到账时间以各渠道处理为准"},beforeClose:{type:Boolean,default:!1},banks:{type:Array,default:function(){return[]}},showAdd:{type:Boolean,default:!0},selected:{type:Object,default:function(){return{}}}},data:function(){return{bank:{},redirect:""}},inject:["popup"],created:function(){this.popup.mkclick=!0,this.redirect=encodeURIComponent(a.default.getUrl())},methods:{confirm:function(t,e){var n=this;this.bank=e,this.$emit("confirm",(function(){n.popup.close()}),this.bank)},close:function(){var t=this;this.beforeClose?this.$emit("close",(function(){t.popup.close()})):this.popup.close()}}};e.default=o},"933e":function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".uni-popup-dialog[data-v-bca31c6a]{width:%?600?%;border-radius:%?30?%;background-color:#fff}.uni-dialog-title[data-v-bca31c6a]{\ndisplay:flex;\nflex-direction:row;justify-content:center;padding-top:%?30?%;padding-bottom:%?10?%}.uni-dialog-title-text[data-v-bca31c6a]{font-size:%?32?%}.uni-dialog-title .absolute[data-v-bca31c6a]{left:%?30?%;right:auto}.uni-dialog-content[data-v-bca31c6a]{\ndisplay:flex;\nflex-direction:row;justify-content:center;align-items:center;padding:%?30?% %?20?%;background-color:#fff;text-align:center}.uni-dialog-content .absolute[data-v-bca31c6a]{left:auto;right:%?30?%}.uni-dialog-content-text[data-v-bca31c6a]{font-size:%?30?%;color:#6e6e6e}.uni-dialog-button-group[data-v-bca31c6a]{\ndisplay:flex;\nflex-direction:row;border-top-color:#f5f5f5;border-top-style:solid;border-top-width:%?2?%}.uni-dialog-button[data-v-bca31c6a]{\ndisplay:flex;\nflex:1;flex-direction:row;justify-content:center;align-items:center;height:%?90?%}.uni-border-left[data-v-bca31c6a]{border-left-color:#f0f0f0;border-left-style:solid;border-left-width:%?2?%}.uni-dialog-button-text[data-v-bca31c6a]{font-size:%?30?%}.uni-button-color[data-v-bca31c6a]{color:#007aff}.uni-dialog-input[data-v-bca31c6a]{flex:1;font-size:%?28?%}",""]),t.exports=e},"9e9b":function(t,e,n){var i=n("933e");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("19343ae2",i,!0,{sourceMap:!1,shadowMode:!1})},b868:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".wraper[data-v-0d24ea9e]{box-shadow:%?0?% %?0?% %?30?% %?0?% #e8e8e8}.bank[data-v-0d24ea9e]{padding:%?40?%;background-color:#f6f6f7}.qrcode[data-v-0d24ea9e]{border:%?2?% #d9d9da dotted;width:%?250?%;height:%?250?%}.money uni-text[data-v-0d24ea9e]{font-size:%?60?%}.money uni-input[data-v-0d24ea9e]{font-size:%?60?%;height:%?60?%}.mybutton[data-v-0d24ea9e]{border-radius:%?16?%;background-image:linear-gradient(90deg,#29ae67,#2aae67)}[data-v-0d24ea9e] .uni-dialog-content{background-color:#f1f1f1!important}",""]),t.exports=e},bbff:function(t,e,n){"use strict";var i=n("9e9b"),a=n.n(i);a.a},d9d8:function(t,e,n){"use strict";n.r(e);var i=n("4f31"),a=n("22b8");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);var s=n("828b"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=u.exports},df4d:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var i={uniIcons:n("ea5d").default},a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"uni-popup-dialog"},[n("v-uni-view",{staticClass:"uni-dialog-title relative"},[n("uni-icons",{staticClass:"absolute f-gray",attrs:{type:"closeempty",color:"",size:"34"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)}}}),n("v-uni-text",{staticClass:"uni-dialog-title-text uni-bold"},[t._v(t._s(t.title))])],1),t._t("default"),n("v-uni-view",{staticClass:"uni-dialog-content relative"},[n("v-uni-input",{staticClass:"uni-dialog-input",attrs:{type:"text",password:"true",placeholder:"输入支付密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:t.password,expression:"password"}],staticClass:"absolute",attrs:{type:"clear",color:"gray",size:"28"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clearInput(e,"password")}}})],1),n("v-uni-view",{staticClass:"uni-dialog-button-group"},[n("v-uni-view",{staticClass:"uni-dialog-button",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cancel.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text f-c55"},[t._v(t._s(t.cancelText))])],1),n("v-uni-view",{staticClass:"uni-dialog-button uni-border-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"uni-dialog-button-text uni-button-color"},[t._v(t._s(t.confimText))])],1)],1)],2)],1)},o=[]}}]);