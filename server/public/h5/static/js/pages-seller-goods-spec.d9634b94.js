(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-seller-goods-spec"],{"0238":function(e,t,i){"use strict";i.r(t);var n=i("6b46"),s=i("08b6");for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("264a");var o=i("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"0ee7f0ba",null,!1,n["a"],void 0);t["default"]=u.exports},"08b6":function(e,t,i){"use strict";i.r(t);var n=i("3512"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},"12d4":function(e,t,i){"use strict";var n=i("f323"),s=i.n(n);s.a},"191a":function(e,t,i){var n=i("d196");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("967d").default;s("462a015c",n,!0,{sourceMap:!1,shadowMode:!1})},"1ff7":function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("5c47");n(i("0ed1"));var s={name:"MyFooter",props:{bgcolor:{type:String,default:"var(--color-basic)"},fixed:{type:Boolean,default:!0}},data:function(){return{height:0}},mounted:function(){var e=this,t=uni.createSelectorQuery().in(this);t.select(".wraper").boundingClientRect((function(t){e.height=t?Math.floor(t.height):0})).exec()}};t.default=s},"264a":function(e,t,i){"use strict";var n=i("41db"),s=i.n(n);s.a},"2f8d":function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,".footer[data-v-fb052a5a]{height:var(--height)}.footer .wraper[data-v-fb052a5a]{background-color:var(--bgcolor);\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),e.exports=t},3512:function(e,t,i){"use strict";i("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"uniPopupDialog",props:{title:{type:String,default:"修改规格"},data:{type:Array,default:function(){return[]}}},data:function(){return{category:{}}},inject:["popup"],created:function(){this.popup.mkclick=!0,this.category=this.data},methods:{confirm:function(){var e=this;this.$emit("confirm",(function(){e.popup.close()}),this.category)},close:function(){var e=this;this.beforeClose?this.$emit("close",(function(){e.popup.close()})):this.popup.close()}}};t.default=n},"41db":function(e,t,i){var n=i("ad5f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("967d").default;s("057ba2c7",n,!0,{sourceMap:!1,shadowMode:!1})},"6b46":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("ea5d").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"bgf top-round-edge pt5 props"},[i("uni-icons",{staticClass:"ml10 absolute",attrs:{type:"closeempty",size:"44"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}),e.title?i("v-uni-view",{staticClass:"uni-bold uni-center f-16 pt5 pb10"},[e._v(e._s(e.title))]):e._e(),i("v-uni-view",{staticClass:"pd10"},e._l(e.category,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"uni-flex uni-row bt item f-16 width-between"},[i("v-uni-text",[e._v("规格"+e._s(n+1))]),i("v-uni-input",{staticClass:"width-surplus ml10",attrs:{maxlength:"20",placeholder:"输入属性名"},model:{value:t.name,callback:function(i){e.$set(t,"name",i)},expression:"item.name"}})],1)],1)})),1)],1),i("v-uni-view",{staticClass:"pd10 bgf"},[i("v-uni-view",{staticClass:"uni-center f-white uni-bold f-15 mybutton",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}},[e._v("确定")])],1)],1)},a=[]},7480:function(e,t,i){"use strict";i.r(t);var n=i("ee0d"),s=i("7c79");for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("8b3c");var o=i("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"8feab002",null,!1,n["a"],void 0);t["default"]=u.exports},"7c79":function(e,t,i){"use strict";i.r(t);var n=i("ff54"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},8370:function(e,t,i){"use strict";i.r(t);var n=i("1ff7"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},"8b3c":function(e,t,i){"use strict";var n=i("191a"),s=i.n(n);s.a},ad5f:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,"uni-input[data-v-0ee7f0ba]{text-align:right}.top-round-edge[data-v-0ee7f0ba]{min-height:%?600?%}.props .item[data-v-0ee7f0ba]{padding:%?40?% 0}",""]),e.exports=t},b5ac:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){}));var n=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"footer",style:{"--bgcolor":this.bgcolor||"none","--height":this.height+"px"}},[t("v-uni-view",{class:["wraper",this.fixed?"fixed-bottom":""]},[this._t("default")],2)],1)},s=[]},c06e:function(e,t,i){"use strict";var n=i("f5bd").default,s=n(i("2634")),a=n(i("2fdc"));i("64aa");var o=n(i("0ed1")),u=n(i("ac89"));n(i("62a0"));function c(){return c=(0,a.default)((0,s.default)().mark((function e(t,i,n){return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){o.default.upload("upload/file",e.tempFilePaths[0],{folder:"goods/",store_id:t.goods.store_id,item_id:t.goods.goods_id,thumbnail:!0},(function(e){0==e.code?(t.props.specs[n][i]=e.data.thumbnail,t.$forceUpdate()):uni.showToast({title:e.message,icon:"none"})}))},fail:function(e){uni.showModal({content:e.errMsg,showCancel:!1})}});case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}e.exports={save:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id spec.js 2020.12.27 $
 * @author winder
 */
function(e){var t=!0;for(var i in e.props.category)e.props.category[i].selected&&(t=!1);if(t&&e.props.specs.length>0)return uni.showModal({content:"至少勾选一个规格",showCancel:!1}),!1;for(var n in e.props.specs){var s=e.props.specs[n];for(var a in e.props.category)if(e.props.category[a].selected){if(u.default.isEmpty(s["spec_"+(Number(a)+1)]))return uni.showModal({content:"规格值不能为空",showCancel:!1}),!1}else s["spec_"+(Number(a)+1)]="";if(u.default.isEmpty(s.price)||Number(s.pirce)<0)return uni.showModal({content:"价格不能为空或非法",showCancel:!1}),!1;if(u.default.isEmpty(s.stock)||Number(s.stock)<0)return uni.showModal({content:"库存不能为空或非法",showCancel:!1}),!1}return!0},upload:function(e,t,i){return c.apply(this,arguments)}}},cfe7:function(e,t,i){"use strict";i.r(t);var n=i("b5ac"),s=i("8370");for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("12d4");var o=i("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"fb052a5a",null,!1,n["a"],void 0);t["default"]=u.exports},d196:function(e,t,i){var n=i("c86c");t=n(!1),t.push([e.i,"uni-input[data-v-8feab002]{text-align:right}.category[data-v-8feab002]{background-image:linear-gradient(90deg,#f2f8f9,#f2f8f9)}.mybutton[data-v-8feab002]{padding:%?12?% %?12?%;border-radius:%?10?%}.mybutton.gray[data-v-8feab002]{background:#fff}.image[data-v-8feab002]{border:%?2?% #f1f1f1 solid;width:%?70?%;height:%?70?%;border-radius:%?6?%;line-height:%?70?%}",""]),e.exports=t},ee0d:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}));var n={uniIcons:i("ea5d").default,myFooter:i("cfe7").default,uniPopup:i("d1df").default,myPopupProps:i("0238").default},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"round-edge pd10 ml10 mr10 mt10 category"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between"},[i("v-uni-text",{staticClass:"f-gray f-16"},[e._v("请给商品设置合适的规格")]),i("v-uni-text",{staticClass:"f-blue f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPopup(t,"category")}}},[e._v("编辑")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row mt10 pb5"},e._l(e.props.category,(function(t,n){return i("v-uni-view",{key:n,staticClass:"uni-flex uni-row",staticStyle:{"-webkit-flex-wrap":"wrap","flex-wrap":"wrap"}},[t.name?i("v-uni-label",{staticClass:"uni-flex uni-row mr10 pr10 l-h20"},[i("v-uni-switch",{attrs:{type:"checkbox",checked:t.selected},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.change(t,n)}}}),i("v-uni-text",[e._v(e._s(t.name))])],1):e._e()],1)})),1)],1),e._l(e.props.specs,(function(t,n){return i("v-uni-view",{key:n},[i("v-uni-view",{staticClass:"round-edge bgf pd10 ml10 mr10 mt10"},[i("v-uni-view",{staticClass:"uni-flex uni-row width-between"},[i("v-uni-text",{staticClass:"uni-bold f-16"},[e._v("规格"+e._s(n+1))]),i("v-uni-text",{staticClass:"f-blue f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.del(n)}}},[e._v("删除")])],1),e._l(e.props.category,(function(t,s){return i("v-uni-view",{key:s,staticClass:"uni-flex uni-column"},[t.selected&&t.name?i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v(e._s(t.name))]),i("v-uni-input",{attrs:{placeholder:"输入"+t.name,maxlength:"30"},model:{value:e.props.specs[n]["spec_"+(s+1)],callback:function(t){e.$set(e.props.specs[n],"spec_"+(s+1),t)},expression:"props.specs[index]['spec_'+(key+1)]"}})],1):e._e()],1)})),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("规格图")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end f-16",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("image",n)}}},[e.props.specs[n].image?i("v-uni-view",[i("v-uni-image",{staticClass:"image",attrs:{src:e.props.specs[n].image,mode:"scaleToFill"}})],1):i("v-uni-view",{staticClass:"image"},[i("uni-icons",{attrs:{type:"plusempty"}})],1)],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("划线价")]),i("v-uni-view",{staticClass:"uni-flex uni-row  flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"digit",placeholder:"输入划线价",maxlength:"7"},model:{value:e.props.specs[n].mkprice,callback:function(t){e.$set(e.props.specs[n],"mkprice",t)},expression:"props.specs[index].mkprice"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("售价")]),i("v-uni-view",{staticClass:"uni-flex uni-row  flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"digit",placeholder:"输入售价",maxlength:"7"},model:{value:e.props.specs[n].price,callback:function(t){e.$set(e.props.specs[n],"price",t)},expression:"props.specs[index].price"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("元")])],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("库存")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"number",placeholder:"输入库存",maxlength:"5"},model:{value:e.props.specs[n].stock,callback:function(t){e.$set(e.props.specs[n],"stock",t)},expression:"props.specs[index].stock"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("件")])],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row f-16 flex-middle width-between mt10"},[i("v-uni-text",[e._v("重量")]),i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end f-16"},[i("v-uni-input",{staticClass:"digit",attrs:{type:"number",placeholder:"输入重量",maxlength:"5"},model:{value:e.props.specs[n].weight,callback:function(t){e.$set(e.props.specs[n],"weight",t)},expression:"props.specs[index].weight"}}),i("v-uni-text",{staticClass:"ml10"},[e._v("kg")])],1)],1)],2)],1)})),i("v-uni-view",{staticClass:"width-surplus ml10 flex-center mr10 mt10 bgf round-edge pd10 flex-middle mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.add.apply(void 0,arguments)}}},[i("uni-icons",{attrs:{type:"plusempty",size:"40"}}),i("v-uni-text",{staticClass:"f-16"},[e._v("添加规格")])],1),i("my-footer",[i("v-uni-view",{staticClass:"uni-flex uni-row flex-center"},[i("v-uni-text",{staticClass:"mybutton uni-bold gray f-16 mt10 mb10 ml10 mr10 inline-block",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancel.apply(void 0,arguments)}}},[e._v("取消")]),i("v-uni-text",{staticClass:"mybutton uni-bold f-white f-16 mt10 mb10 ml10 mr10 inline-block",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])],1)],1),i("uni-popup",{ref:"category",attrs:{type:"bottom"}},[i("my-popup-props",{attrs:{data:e.props.category},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}})],1)],2)},a=[]},f323:function(e,t,i){var n=i("2f8d");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var s=i("967d").default;s("e74e04f6",n,!0,{sourceMap:!1,shadowMode:!1})},ff54:function(e,t,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("e966"),i("aa9c");var s=n(i("ac89")),a=n(i("c06e")),o={data:function(){return{goods:{},props:{category:[{name:"颜色",selected:!0},{name:"尺码",selected:!0}],specs:[{spec_1:"",spec_2:"",price:"",stock:"",weight:0,image:""}]}}},methods:{showPopup:function(e,t){return this.$refs[t].open()},confirm:function(e,t){this.props.category=t,this.$forceUpdate(),e()},upload:function(e,t){a.default.upload(this,e,parseInt(t))},save:function(){a.default.save(this)&&(uni.setStorageSync("__props__",this.props),uni.navigateBack())},cancel:function(){uni.navigateBack()},change:function(e,t){this.props.category[t].selected=e.detail.value},add:function(){this.props.specs.push({spec_1:"",spec_2:"",price:"",stock:"",weight:0,image:""})},del:function(e){var t=[];for(var i in this.props.specs)i!=e&&t.push(this.props.specs[i]);this.props.specs=t}},onLoad:function(e){if(s.default.verifyLogin(!0,this.$mp.page.route)){if(!s.default.verifySeller())return s.default.redirect("/pages/seller/store/apply");var t=uni.getStorageSync("__props__");!s.default.isEmpty(t)&&t.category.length>0&&(this.props.specs=t.specs,t.category.length<2&&(this.props.category[1].selected=!1),this.props.category=Object.assign(this.props.category,t.category)),this.goods=uni.getStorageSync("__goods__")||{}}}};t.default=o}}]);