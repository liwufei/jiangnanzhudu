(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-seller-store-apply"],{"04aa":function(e,t,i){"use strict";var s=i("f5bd").default,n=s(i("2634")),a=s(i("2fdc")),r=s(i("0ed1")),o=s(i("ac89"));s(i("62a0"));function u(e){return l.apply(this,arguments)}function l(){return l=(0,a.default)((0,n.default)().mark((function e(t){var i;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.default.promise("site/read");case 2:if(i=e.sent,i&&i.store_allow){e.next=5;break}return e.abrupt("return",o.default.redirectMessage("warn","商家入驻","暂不开放商家入驻"));case 5:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(){return c=(0,a.default)((0,n.default)().mark((function e(t,i){var s;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=uni.getStorageSync("visitor")||{},uni.chooseImage({count:1,sizeType:["compressed"],success:function(e){r.default.upload("upload/file",e.tempFilePaths[0],{folder:"identity/",store_id:s.userid},(function(e){0==e.code?(t.store[i]=e.data.fileUrl,t.$forceUpdate()):uni.showToast({title:e.message,icon:"none"})}))},fail:function(e){uni.showModal({content:e.errMsg,showCancel:!1})}});case 2:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}e.exports={upload:function(e,t){return c.apply(this,arguments)},submit:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id apply.js 2019.10.29 $
 * @author winder
 */
function(e){"personal"==e.store.stype&&(e.store.contacter=e.store.owner),r.default.request("store/add",e.store,(function(e){if(0==e.code){var t=e.data;if(1==t.state){var i=uni.getStorageSync("visitor")||{};uni.setStorageSync("visitor",Object.assign(i,{store_id:t.store_id})),o.default.redirectMessage("success","店铺已开通","恭喜！您的店铺已开通，您可以到店铺设置继续完善店铺资料",[{title:"店铺设置",url:"/pages/seller/store/setting"}])}else o.default.redirectMessage("success","店铺申请已提交",t.apply_remark)}else e.message&&uni.showModal({content:e.message,showCancel:!1})}))},verifyApply:function(e){var t=uni.getStorageSync("visitor")||{};r.default.request("store/read",{store_id:t.userid},(function(t){if(0==t.code){var i=t.data;if(i){if(0==i.state)o.default.redirectMessage("success","店铺审核中",i.apply_remark);else if(1==i.state){var s=uni.getStorageSync("visitor")||{};uni.setStorageSync("visitor",Object.assign(s,{store_id:i.store_id,store_name:i.store_name})),o.default.redirectMessage("success","店铺已开通","恭喜！您的店铺已开通，您可以到店铺设置继续完善店铺资料",[{title:"店铺设置",url:"/pages/seller/store/setting"}])}else if(2==i.state)o.default.redirectMessage("fail","店铺状态",i.close_reason);else if(3==i.state){for(var n in"modify"!=e.mode&&o.default.redirectMessage("warn","审核未通过",i.apply_remark,[{title:"修改资料",url:"/pages/seller/store/apply?mode=modify"}]),e.step=2,e.store)e.store[n]=i[n];(function(e){r.default.request("store/privacy",null,(function(t){if(0==t.code&&t.data){var i=["owner","identity_card","identity_front","identity_back","business_license"];for(var s in i)e.store[i[s]]=t.data[i[s]]}}))})(e),function(e){r.default.request("store/grade",{id:e.store.sgrade},(function(t){0==t.code&&t.data&&(e.store.grade_name=t.data.name,e.$forceUpdate())}))}(e)}}else u(e)}}))},verifyJoin:u,grades:function(e){r.default.request("store/grades",{page_size:6},(function(t){0==t.code&&(e.grades=t.data?t.data.list:[],e.grades.length>0&&(e.store.sgrade=e.grades[0].id,e.store.grade_name=e.grades[0].name))}))}}},"0f6b":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return s}));var s={uniIcons:i("ea5d").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"bgf pt5"},[i("uni-icons",{staticClass:"ml10 absolute pt5",attrs:{type:"closeempty",size:"44",color:"gray"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)}}}),i("v-uni-view",{class:["uni-center f-16 pt10 pb10"]},[e._v(e._s(e.title))]),i("v-uni-scroll-view",{staticStyle:{height:"700rpx"},attrs:{"scroll-x":!1,"scroll-y":!0}},e._l(e.grades,(function(t,s){return i("v-uni-view",{key:s,staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt flex-middle width-between",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.confirm(i,t)}}},[i("v-uni-view",{staticClass:"uni-flex uni-column mr10"},[i("v-uni-text",{staticClass:"f-15 uni-bold"},[e._v(e._s(t.name))]),i("v-uni-view",{staticClass:"f-gray f-14"},[t.charge&&0!=t.charge?i("v-uni-text",[e._v("服务费"+e._s(t.charge))]):i("v-uni-text",[e._v("免费开通")]),1==t.need_confirm?i("v-uni-text",[e._v("，审核后开通")]):i("v-uni-text",[e._v("，无需审核")]),i("v-uni-text",[e._v("，可发布商品数")]),t.goods_limit?i("v-uni-text",[e._v(e._s(t.goods_limit)+"件")]):i("v-uni-text",[e._v("无限制")]),i("v-uni-text",[e._v("，可用图片存储空间")]),t.space_limit?i("v-uni-text",[e._v(e._s(t.space_limit)+"M")]):i("v-uni-text",[e._v("无限制")])],1)],1),i("v-uni-view",{staticClass:"uni-center",staticStyle:{width:"90rpx"}},[i("uni-icons",{directives:[{name:"show",rawName:"v-show",value:e.selected==t.id,expression:"selected == item.id"}],staticClass:"f-red",attrs:{type:"checkmarkempty",size:"40",color:""}})],1)],1)})),1)],1)],1)},a=[]},"3aed":function(e,t,i){"use strict";i.r(t);var s=i("0f6b"),n=i("ad24");for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);var r=i("828b"),o=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"eed23bce",null,!1,s["a"],void 0);t["default"]=o.exports},4070:function(e,t,i){"use strict";var s=i("b9ac"),n=i.n(s);n.a},"53af":function(e,t,i){"use strict";i("6a54");var s=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("64aa");var n=s(i("0ed1")),a={name:"uniPopupDialog",props:{title:{type:String,default:"店铺类型"},beforeClose:{type:Boolean,default:!1},grades:{type:Array,default:function(){return[]}},selected:{type:[Number,String],default:0}},data:function(){return{result:{}}},inject:["popup"],created:function(){this.popup.mkclick=!0,0==this.grades.length&&this.getGrades(this)},methods:{confirm:function(e,t){var i=this;this.result=t,this.$emit("confirm",(function(){i.popup.close()}),this.result)},close:function(){var e=this;this.beforeClose?this.$emit("close",(function(){e.popup.close()})):this.popup.close()},getGrades:function(e){n.default.request("store/grades",{page_size:6},(function(t){0==t.code&&(e.grades=t.data?t.data.list:[])}))}}};t.default=a},9072:function(e,t,i){var s=i("c86c");t=s(!1),t.push([e.i,".fixtop[data-v-ef7e1854]{margin-top:%?-80?%;z-index:10}.applybg[data-v-ef7e1854]{width:100%;height:%?300?%;background:var(--color-red);overflow:hidden}.applybg .edge[data-v-ef7e1854]{display:block;width:%?1250?%;height:%?1250?%;background-image:linear-gradient(0deg,#fc2b34,#ff7d52);border-radius:100%;top:%?0?%;right:%?-700?%}.store-type .iconfont[data-v-ef7e1854]{font-size:%?70?%;background-color:#ffede9;width:%?100?%;height:%?100?%;line-height:%?100?%;text-align:center;border-radius:100%}.store-type .iconfont.iconqiye[data-v-ef7e1854]{color:#f60}.store-type .iconfont.iconmoban[data-v-ef7e1854]{background-color:#e2ecfc;color:#0086b3}.edgeblue[data-v-ef7e1854]{border:%?2?% #007bd3 dashed;background-color:#f3f8ff;border-radius:%?20?%;color:#0086b3}.edgeblue>uni-view[data-v-ef7e1854]{line-height:%?60?%}.edgeblue uni-image[data-v-ef7e1854]{border-radius:%?20?%;width:100%;display:block}.mybutton[data-v-ef7e1854]{border-radius:%?20?%}",""]),e.exports=t},ad24:function(e,t,i){"use strict";i.r(t);var s=i("53af"),n=i.n(s);for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=n.a},b9ac:function(e,t,i){var s=i("9072");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var n=i("967d").default;n("791090ae",s,!0,{sourceMap:!1,shadowMode:!1})},cf673:function(e,t,i){"use strict";i.r(t);var s=i("e402"),n=i("ebaf");for(var a in n)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(a);i("4070");var r=i("828b"),o=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,"ef7e1854",null,!1,s["a"],void 0);t["default"]=o.exports},e402:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return s}));var s={uniIcons:i("ea5d").default,uniPopup:i("d1df").default,myPopupSgrade:i("3aed").default},n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"applybg relative"},[i("v-uni-text",{staticClass:"edge absolute"}),i("v-uni-view",{staticClass:"relative mt10 pt10 ml10 pl10 mr10 pr10"},[1==e.step?i("v-uni-view",{staticClass:"uni-flex uni-column l-h20"},[i("v-uni-text",{staticClass:"uni-bold f-18 f-white mt10 pt10"},[e._v("请选择主体类型")]),i("v-uni-text",{staticClass:"f-white pt10"},[e._v("认证后无法修改，请选择符合要求的主体类型")])],1):i("v-uni-view",{staticClass:"uni-flex uni-column l-h20"},[i("v-uni-text",{staticClass:"uni-bold f-18 f-white mt10 pt10"},[e._v("填写经营者及店铺信息")]),i("v-uni-text",{staticClass:"f-white pt10"},[e._v("请确保填写的信息真实有效，平台将对信息进行审核")])],1)],1)],1),1==e.step?i("v-uni-view",[i("v-uni-view",{staticClass:"pd10 relative store-type fixtop"},[i("v-uni-view",{staticClass:"uni-flex uni-row round-edge bgf flex-middle pd10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.apply("company")}}},[i("v-uni-view",{staticClass:"iconfont iconqiye"}),i("v-uni-view",{staticClass:"uni-flex uni-row width-between pd10 flex-middle ml10"},[i("v-uni-view",{staticClass:"uni-flex uni-column"},[i("v-uni-text",{staticClass:"f-15 uni-bold"},[e._v("企业开店")]),i("v-uni-text",{staticClass:"f-gray"},[e._v("需提供营业执照及法人身份证")])],1),i("uni-icons",{attrs:{type:"arrowright",size:"40"}})],1)],1),i("v-uni-view",{staticClass:"uni-flex uni-row round-edge bgf flex-middle pd10 mt10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.apply("personal")}}},[i("v-uni-view",{staticClass:"iconfont iconmoban"}),i("v-uni-view",{staticClass:"uni-flex uni-row width-between pd10 flex-middle ml10"},[i("v-uni-view",{staticClass:"uni-flex uni-column"},[i("v-uni-text",{staticClass:"f-15 uni-bold"},[e._v("个人开店")]),i("v-uni-text",{staticClass:"f-gray"},[e._v("需提供本人身份证资料")])],1),i("uni-icons",{attrs:{type:"arrowright",size:"40"}})],1)],1)],1)],1):i("v-uni-view",[i("v-uni-view",{staticClass:"pd10 relative fixtop"},[i("v-uni-view",{staticClass:"round-edge bgf"},[i("v-uni-view",{staticClass:"pd10 f-15 uni-bold"},[i("v-uni-text",[e._v("店铺信息")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("店铺名称")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"text"},model:{value:e.store.store_name,callback:function(t){e.$set(e.store,"store_name",t)},expression:"store.store_name"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt width-between",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showPopup(t,"sgrade")}}},[i("v-uni-text",[e._v("店铺类型")]),i("v-uni-view",{staticClass:"pl10"},[i("v-uni-text",[e._v(e._s(e.store.grade_name))]),i("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"company"==e.store.stype,expression:"store.stype == 'company'"}]},[i("v-uni-view",{staticClass:"pl10 pr10"},[i("v-uni-view",{staticClass:"round-edge bgf"},[i("v-uni-view",{staticClass:"pd10 f-15 uni-bold"},[i("v-uni-text",[e._v("经营者信息")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("企业名称")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"text"},model:{value:e.store.owner,callback:function(t){e.$set(e.store,"owner",t)},expression:"store.owner"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("联系手机")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"digit"},model:{value:e.store.phone,callback:function(t){e.$set(e.store,"phone",t)},expression:"store.phone"}})],1)],1)],1),i("v-uni-view",{staticClass:"pd10"},[i("v-uni-view",{staticClass:"round-edge bgf pb10"},[i("v-uni-view",{staticClass:"pd10 f-15 uni-bold"},[i("v-uni-text",[e._v("营业证件信息")])],1),i("v-uni-view",{staticClass:"ml10 mr10 edgeblue mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("business_license")}}},[e.store.business_license?i("v-uni-image",{attrs:{src:e.store.business_license,mode:"widthFix"}}):i("v-uni-view",{staticClass:"uni-flex uni-column flex-middle flex-center pd10 mt10 mb10"},[i("uni-icons",{attrs:{type:"plusempty",color:"#0086B3",size:"60"}}),i("v-uni-text",[e._v("工商营业执照")])],1)],1),i("v-uni-view",{staticClass:"ml10 mr10 edgeblue mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("identity_front")}}},[e.store.identity_front?i("v-uni-image",{attrs:{src:e.store.identity_front,mode:"widthFix"}}):i("v-uni-view",{staticClass:"uni-flex uni-column flex-middle flex-center pd10 mt10 mb10"},[i("uni-icons",{attrs:{type:"plusempty",color:"#0086B3",size:"60"}}),i("v-uni-text",[e._v("法人身份证正面")])],1)],1),i("v-uni-view",{staticClass:"ml10 mr10 edgeblue mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("identity_back")}}},[e.store.identity_back?i("v-uni-image",{attrs:{src:e.store.identity_back,mode:"widthFix"}}):i("v-uni-view",{staticClass:"uni-flex uni-column flex-middle flex-center pd10 mt10 mb10"},[i("uni-icons",{attrs:{type:"plusempty",color:"#0086B3",size:"60"}}),i("v-uni-text",[e._v("法人身份证反面")])],1)],1),i("v-uni-view",{staticClass:"f-gray ml10"},[e._v("温馨提示：请上传清晰的证件图片，避免审核退回")])],1)],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"company"!=e.store.stype,expression:"store.stype != 'company'"}]},[i("v-uni-view",{staticClass:"pl10 pr10"},[i("v-uni-view",{staticClass:"round-edge bgf"},[i("v-uni-view",{staticClass:"pd10 f-15 uni-bold"},[i("v-uni-text",[e._v("经营者信息")])],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("店长姓名")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"text",placeholder:"真实姓名"},model:{value:e.store.owner,callback:function(t){e.$set(e.store,"owner",t)},expression:"store.owner"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("手机号码")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"digit"},model:{value:e.store.phone,callback:function(t){e.$set(e.store,"phone",t)},expression:"store.phone"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row ml10 mr10 pt10 pb10 bt"},[i("v-uni-text",[e._v("身份证号")]),i("v-uni-input",{staticClass:"pl10 pr10 width-surplus",attrs:{type:"text"},model:{value:e.store.identity_card,callback:function(t){e.$set(e.store,"identity_card",t)},expression:"store.identity_card"}})],1)],1)],1),i("v-uni-view",{staticClass:"pd10"},[i("v-uni-view",{staticClass:"round-edge bgf pb10"},[i("v-uni-view",{staticClass:"pd10 f-15 uni-bold"},["company"==e.store.stype?i("v-uni-text",[e._v("营业证件信息")]):i("v-uni-text",[e._v("身份证件信息")])],1),i("v-uni-view",{staticClass:"ml10 mr10 edgeblue mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("identity_front")}}},[e.store.identity_front?i("v-uni-image",{attrs:{src:e.store.identity_front,mode:"widthFix"}}):i("v-uni-view",{staticClass:"uni-flex uni-column flex-middle flex-center pd10 mt10 mb10"},[i("uni-icons",{attrs:{type:"plusempty",color:"#0086B3",size:"60"}}),i("v-uni-text",[e._v("本人身份证正面")])],1)],1),i("v-uni-view",{staticClass:"ml10 mr10 edgeblue mb10",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.upload("identity_back")}}},[e.store.identity_back?i("v-uni-image",{attrs:{src:e.store.identity_back,mode:"widthFix"}}):i("v-uni-view",{staticClass:"uni-flex uni-column flex-middle flex-center pd10 mt10 mb10"},[i("uni-icons",{attrs:{type:"plusempty",color:"#0086B3",size:"60"}}),i("v-uni-text",[e._v("本人身份证反面")])],1)],1),i("v-uni-view",{staticClass:"f-gray ml10"},[e._v("温馨提示：请上传清晰的证件图片，避免审核被拒")])],1)],1)],1),i("uni-popup",{ref:"sgrade",staticClass:"relative",staticStyle:{"z-index":"100"},attrs:{type:"bottom"}},[i("my-popup-sgrade",{attrs:{grades:e.grades,selected:e.store.sgrade},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.close.apply(void 0,arguments)},confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.confirm.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"pl10 pr10 pb10"},[i("v-uni-view",{staticClass:"mybutton f-white f-15",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}},[e._v("确认提交")])],1)],1)],1)},a=[]},e8382:function(e,t,i){"use strict";i("6a54");var s=i("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i("ac89")),a=s(i("04aa")),r={data:function(){return{step:1,mode:"",store:{stype:"personal",business_license:"",identity_front:"",identity_back:"",identity_card:"",store_name:"",owner:"",phone:"",contacter:"",sgrade:0,grade_name:""},grades:[]}},methods:{showPopup:function(e,t){return this.$refs[t].open()},close:function(e){e()},confirm:function(e,t){this.store.grade_name=t.name,this.store.sgrade=t.id,e()},apply:function(e){this.step=2,this.store.stype=e},sgrade:function(){a.default.changeGrade(this)},upload:function(e){a.default.upload(this,e)},submit:function(){a.default.submit(this)}},onLoad:function(e){this.mode=e.mode,a.default.grades(this)},onShow:function(){if(n.default.verifyLogin(!0,this.$mp.page.route)){if(n.default.verifySeller())return n.default.redirect("/pages/seller/store/apply");a.default.verifyApply(this)}}};t.default=r},ebaf:function(e,t,i){"use strict";i.r(t);var s=i("e8382"),n=i.n(s);for(var a in s)["default"].indexOf(a)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(a);t["default"]=n.a}}]);