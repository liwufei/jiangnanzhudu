(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-seller-setting-index"],{1963:function(t,i,e){"use strict";var n=e("4ba5"),s=e.n(n);s.a},"201c":function(t,i,e){"use strict";var n=e("f5bd").default;e("bf0f"),e("2797"),e("de6c");var s=n(e("2634")),a=n(e("2fdc")),o=n(e("39d8")),u=n(e("0ed1")),r=n(e("ac89"));n(e("62a0"));function c(){return c=(0,a.default)((0,s.default)().mark((function t(i,e){return(0,s.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:uni.chooseImage({count:1,sizeType:["compressed"],success:function(t){u.default.upload("upload/file",t.tempFilePaths[0],{folder:"profile/"+i.visitor.userid+"/",filename:e},(function(t){0==t.code?(i.visitor[e]=t.data.fileUrl,u.default.request("user/update",(0,o.default)({},e,t.data.fileUrl),(function(t){0==t.code?(uni.setStorageSync("visitor",i.visitor),uni.showToast({title:"上传成功"})):uni.showToast({title:t.message,icon:"none"})}))):uni.showToast({title:t.message,icon:"none"})}))},fail:function(t){uni.showModal({content:t.errMsg,showCancel:!1})}});case 1:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}t.exports={user:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id setting.js 2019.10.29 $
 * @author winder
 */
function(t){u.default.request("user/read",null,(function(i){0==i.code&&(t.visitor=uni.getStorageSync("visitor")||{},Object.assign(t.visitor,i.data),uni.setStorageSync("visitor",t.visitor))}))},logout:function(t){uni.showModal({title:"提示",content:"确定退出登录？",success:function(t){t.confirm&&(uni.removeStorageSync("visitor"),uni.removeStorageSync("access_token"),uni.navigateTo({url:"/pages/user/login"}))}})},logoff:function(t){uni.showModal({title:"提示",content:"注销后，该账户将永久删除，您要继续吗？",success:function(t){t.confirm&&u.default.request("user/logoff",null,(function(t){0==t.code&&(uni.removeStorageSync("visitor"),uni.removeStorageSync("access_token"),uni.switchTab({url:"/pages/index/index"}))}))}})},profile:function(t,i,e){u.default.request("user/update",(0,o.default)({},i,e),(function(n){0==n.code?uni.showToast({title:"修改成功",complete:function(){t.visitor[i]=e}}):uni.showToast({title:n.message,icon:"none"})}))},upload:function(t,i){return c.apply(this,arguments)},cache:function(t){uni.getStorageInfo({success:function(t){t.keys.forEach((function(t){"visitor"!=t&&"access_token"!=t&&uni.removeStorageSync(t)})),uni.showToast({title:"缓存已清除"})}})},connect:function(t,i,e){if("remove"==e)uni.showActionSheet({itemList:["解除绑定"],success:function(n){0==n.tapIndex&&uni.showModal({title:"提示",content:"解除绑定后，关联账号将无法登录，确定吗？",success:function(n){n.confirm&&function(t,i,e){u.default.request("remove"==e?"user/unbind":"user/bind",i,(function(n){if(0==n.code&&n.data){if(t.visitor.thirds=n.data||{},"remove"!=e){var s=uni.getStorageSync("visitor")||{};uni.setStorageSync("visitor",Object.assign(s,{openid:"APP"==i.terminal?n.data.weixinapp:n.data.weixinmp}))}uni.showToast({title:"remove"==e?"您已解除绑定":"绑定成功！",duration:2e3}),t.$forceUpdate()}else n.message&&uni.showModal({content:n.message,showCancel:!1})}))}(t,i,e)}})}});else{if(r.default.isWechat()){if("alipay"==i.logintype)return void uni.showToast({title:"请在支付宝客户端打开链接",icon:"none"})}else{if("weixin"==i.logintype)return void uni.showToast({title:"请在微信客户端打开链接",icon:"none"});if("alipay"==i.logintype&&!r.default.isAlipay())return void uni.showToast({title:"请在支付宝客户端打开链接",icon:"none"})}u.default.request("auth/connect",Object.assign(i,{callback:r.default.siteUrl()+"/pages/login/callback"}),(function(t){0==t.code&&t.data&&(uni.setStorageSync("redirect",r.default.getUrl()),location.href=t.data.redirect)}))}}}},"2e68":function(t,i,e){var n=e("c86c");i=n(!1),i.push([t.i,".portait uni-image[data-v-5b7e056c]{width:%?120?%;height:%?120?%;border-radius:50%}",""]),t.exports=i},"429c":function(t,i,e){"use strict";e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return a})),e.d(i,"a",(function(){return n}));var n={uniIcons:e("ea5d").default},s=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("v-uni-view",{staticClass:"pb10"},[n("v-uni-view",{staticClass:"ml10 mr10 round-edge bgf mt10"},[n("v-uni-view",{staticClass:"uni-flex uni-row pd10 width-between flex-middle"},[n("v-uni-view",{staticClass:"uni-flex uni-row width-surplus portait",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.upload("portrait")}}},[t.visitor.portrait?n("v-uni-image",{attrs:{src:t.visitor.portrait+"?t="+t.random,mode:"scaleToFill"}}):n("v-uni-image",{attrs:{src:e("a709"),mode:"scaleToFill"}}),n("v-uni-view",{staticClass:"uni-flex uni-column f-gray ml10 mt5 f-14"},[n("v-uni-view",[t._v("点此设置用户头像")]),n("v-uni-text",[t._v("用户ID："+t._s(t.visitor.username))])],1)],1),n("uni-icons",{attrs:{type:"arrowright"}})],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/user/profile?field=nickname","hover-class":"none"}},[n("v-uni-text",[t._v("用户昵称")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(t.visitor.nickname))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/user/profile?field=password","hover-class":"none"}},[n("v-uni-text",[t._v("修改密码")]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"ml10 mr10 round-edge bgf mt10"},[n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt mt10 f-15",attrs:{url:"/pages/user/phone","hover-class":"none"}},[n("v-uni-text",[t._v("手机号码")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(t.visitor.phone_mob))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/user/profile?field=email","hover-class":"none"}},[n("v-uni-text",[t._v("电子邮箱")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(t.visitor.email))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/user/profile?field=qq","hover-class":"none"}},[n("v-uni-text",[t._v("QQ号")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(t.visitor.qq||""))]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1)],1),n("v-uni-view",{staticClass:"ml10 mr10 round-edge bgf mt10"},[n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 mt10 f-15",attrs:{url:"/pages/user/profile?field=birthday","hover-class":"none"}},[n("v-uni-text",[t._v("生日")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(t.visitor.birthday||""))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"uni-flex width-between pd10 bt f-15",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.gender.apply(void 0,arguments)}}},[n("v-uni-text",[t._v("性别")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"},[t._v(t._s(1==t.visitor.gender?"男":2==t.visitor.gender?"女":"保密"))]),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-view",{staticClass:"ml10 mr10 round-edge bgf mt10"},[n("v-uni-view",{staticClass:"uni-flex width-between pd10 mt10 f-15",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.cache.apply(void 0,arguments)}}},[n("v-uni-text",[t._v("清理缓存")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-view",{staticClass:"uni-flex width-between pd10 f-15 bt",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.logoff.apply(void 0,arguments)}}},[n("v-uni-text",[t._v("注销该账号")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1),n("v-uni-navigator",{staticClass:"uni-flex width-between pd10 bt f-15",attrs:{url:"/pages/about/about","hover-class":"none"}},[n("v-uni-text",[t._v("关于")]),n("v-uni-view",{staticClass:"uni-flex uni-row"},[n("v-uni-view",{staticClass:"f-15"}),n("uni-icons",{attrs:{type:"arrowright"}})],1)],1)],1),n("v-uni-view",{staticClass:"uni-center bgr f-white pd10 mt10 f-15 round-edge mb10 ml10 mr10",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.logout.apply(void 0,arguments)}}},[t._v("退出当前账户")])],1)},a=[]},"4ba5":function(t,i,e){var n=e("2e68");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e("967d").default;s("375c3435",n,!0,{sourceMap:!1,shadowMode:!1})},"56d0":function(t,i,e){"use strict";e.r(i);var n=e("429c"),s=e("d0e3");for(var a in s)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return s[t]}))}(a);e("1963");var o=e("828b"),u=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"5b7e056c",null,!1,n["a"],void 0);i["default"]=u.exports},a6f7:function(t,i,e){"use strict";e("6a54");var n=e("f5bd").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n(e("ac89")),a=n(e("201c")),o={data:function(){return{util:s.default,random:"",visitor:{thirds:{}},genders:["女","男","保密"]}},methods:{upload:function(t){a.default.upload(this,t)},gender:function(){var t=this;uni.showActionSheet({itemList:t.genders,success:function(i){a.default.profile(t,"gender",2-i.tapIndex)}})},connect:function(t,i){a.default.connect(this,{logintype:t},i)},logout:function(){a.default.logout(this,"pages/seller/login/login")},logoff:function(){a.default.logoff(this,"pages/seller/login/login")},cache:function(){a.default.cache(this)}},onLoad:function(t){this.random=Math.random(),s.default.verifyLogin(!0,this.$mp.page.route)&&a.default.user(this)}};i.default=o},a709:function(t,i,e){t.exports=e.p+"static/images/default_user_portrait.gif"},d0e3:function(t,i,e){"use strict";e.r(i);var n=e("a6f7"),s=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=s.a}}]);