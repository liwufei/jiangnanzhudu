import{s as D,b as J}from"./store.83cfdc9e.js";import{f as L}from"./delivery.b69a1721.js";import{a as q,s as A}from"./blocks.a7684095.js";import{m as G}from"./multiselector.e3a63f5d.js";import{m as H}from"./seller.b9776ff6.js";import{_ as P}from"./user.4d579c29.js";import{m as Q}from"./seller.c6d1e739.js";import{B as X,r as f,y as w,d as Y,O as Z,e as n,o as d,c as _,a as e,g as c,i as l,F as I,k as o,m as ee,h as g,j as u,t as te,l as b,v as le,x as oe,E as se}from"./index.193ff21d.js";import"./weixin.864acb91.js";import"./chat.b31cc7ff.js";const S=p=>(le("data-v-7103420b"),p=p(),oe(),p),ae={class:"main w pt10"},ne={class:"round-edge pd10 bgf"},de={class:"pd10"},re=u("\u914D\u9001"),ie=u("\u540C\u57CE\u914D\u9001"),ce=u("\u95E8\u5E97\u914D\u7F6E"),_e={class:"round-edge pd10 bgf mt20"},me={key:0},ue={key:1,class:"f-red"},pe={key:0,class:"uni-flex uni-row flex-middle"},fe={class:"map flex-middle center"},ge={key:0},be={key:1,class:"f-gray center"},ve=S(()=>c("div",{class:"f-gray f-12"},"\u63D0\u793A\uFF1A\u5982\u5730\u56FE\u7EC4\u4EF6\u4E0D\u663E\u793A\uFF0C\u4E14\u6D4F\u89C8\u5668\u62A5\u9519\u4E0D\u652F\u6301Webgl\uFF0C\u5219\u8FDB\u5165\u6D4F\u89C8\u5668\u8BBE\u7F6E\u3010about:config\u3011\u542F\u7528Webgl",-1)),ye={class:"uni-flex uni-row"},he=S(()=>c("span",{class:"ml10 f-12 f-gray nowrap"},"\u516C\u91CC",-1)),ke=u("\u4FDD\u5B58\u66F4\u65B0"),we={setup(p){const{proxy:x}=X(),C=f({}),t=w({}),i=w({list:[],selected:[]}),v=w({lat:39.908802,lng:116.397502}),y=f();Y(()=>{C.value=JSON.parse(localStorage.getItem("visitor"))||{},A(null,s=>{y.value=s.mapKey}),D({store_id:C.value.store_id},s=>{Object.assign(t,s),s.latitude&&s.longitude&&Object.assign(v,{lat:parseFloat(s.latitude),lng:parseFloat(s.longitude)}),L({category:"locality"},a=>{a&&(i.list=a,i.selected=[s.deliveryCode])})})});const B=s=>{t.region_id=s.id},N=s=>{i.selected.length>1&&i.selected.splice(0,1),t.deliveryCode=i.selected[0]||""},K=s=>{let a=x.$refs.map.getCenter();J({latitude:a.lat,longitude:a.lng,region_id:t.region_id,address:t.address,deliveryCode:t.deliveryCode,radius:t.radius},h=>{se.success("\u95E8\u5E97\u66F4\u65B0\u6210\u529F\uFF01")})},O=f({pan:s=>{V.value=[{id:"center",position:x.$refs.map.getCenter()}]}}),V=f([{id:"center",position:v,styleId:"marker",content:""}]),U=Z({marker:{}});return(s,a)=>{const h=n("el-col"),k=n("el-breadcrumb-item"),j=n("el-breadcrumb"),E=n("el-checkbox"),M=n("el-checkbox-group"),m=n("el-form-item"),F=n("el-input"),R=n("tmap-multi-marker"),$=n("tmap-map"),T=n("el-button"),W=n("el-form"),z=n("el-row");return d(),_(I,null,[e(H),c("div",ae,[e(z,{gutter:12},{default:l(()=>[e(h,{span:4},{default:l(()=>[e(Q)]),_:1}),e(h,{span:20},{default:l(()=>[c("div",ne,[c("div",de,[e(j,{separator:"/"},{default:l(()=>[e(k,null,{default:l(()=>[re]),_:1}),e(k,null,{default:l(()=>[ie]),_:1}),e(k,null,{default:l(()=>[ce]),_:1})]),_:1})])]),c("div",_e,[e(W,{inline:!0,class:"pd10 mt20"},{default:l(()=>[e(m,{label:"\u914D\u9001\u65B9\u5F0F","label-width":100,class:"w-full"},{default:l(()=>[o(i).list.length>0?(d(),_("div",me,[e(M,{modelValue:o(i).selected,"onUpdate:modelValue":a[0]||(a[0]=r=>o(i).selected=r),onChange:N},{default:l(()=>[(d(!0),_(I,null,ee(o(i).list,r=>(d(),g(E,{label:r.code},{default:l(()=>[u(te(r.name),1)]),_:2},1032,["label"]))),256))]),_:1},8,["modelValue"])])):(d(),_("div",ue,"\u540C\u57CE\u914D\u9001\u63D2\u4EF6\u672A\u5B89\u88C5"))]),_:1}),o(t).store_id?(d(),g(m,{key:0,label:"\u95E8\u5E97\u4F4D\u7F6E","label-width":100},{default:l(()=>[o(t).store_id?(d(),_("div",pe,[e(G,{api:"region/list",idField:"region_id",nameField:"name",parentField:"parent_id",original:[o(t).province||"",o(t).city||"",o(t).district||""],onCallback:a[1]||(a[1]=r=>{B(r)})},null,8,["original"]),e(F,{modelValue:o(t).address,"onUpdate:modelValue":a[2]||(a[2]=r=>o(t).address=r),placeholder:"\u8857\u9053/\u5C0F\u533A/\u697C\u680B/\u623F\u53F7",class:"mr10"},null,8,["modelValue"])])):b("",!0)]),_:1})):b("",!0),o(t).store_id?(d(),g(m,{key:1,label:"\u4F4D\u7F6E\u5750\u6807","label-width":100},{default:l(()=>[c("div",fe,[y.value?(d(),_("div",ge,[e($,{mapKey:y.value,zoom:"15",center:o(v),events:O.value,scrollable:!1,ref:"map"},{default:l(()=>[e(R,{geometries:V.value,styles:o(U),ref:"markers"},null,8,["geometries","styles"])]),_:1},8,["mapKey","center","events"])])):(d(),_("div",be,"\u5730\u56FE\u63D2\u4EF6\u672A\u914D\u7F6E"))])]),_:1})):b("",!0),o(t).store_id?(d(),g(m,{key:2,label:" ","label-width":100},{default:l(()=>[ve]),_:1})):b("",!0),e(m,{label:"\u652F\u6301\u914D\u9001\u8DDD\u79BB","label-width":100,class:"w-full"},{default:l(()=>[c("div",ye,[e(F,{modelValue:o(t).radius,"onUpdate:modelValue":a[3]||(a[3]=r=>o(t).radius=r),modelModifiers:{number:!0},clearable:""},null,8,["modelValue"]),he])]),_:1}),e(m,{label:" ","label-width":100},{default:l(()=>[e(T,{onClick:K,type:"primary",class:"mt20"},{default:l(()=>[ke]),_:1})]),_:1})]),_:1})])]),_:1})]),_:1})]),e(P)],64)}}};var je=q(we,[["__scopeId","data-v-7103420b"]]);export{je as default};
