import{u as M,r as R,y as V,d as W,e as i,o as $,c as z,a as e,g as d,i as s,k as n,F as A,t as v,j as p,E as D,v as H,x as L,H as x,n as C}from"./index.193ff21d.js";import{a as T,g as G}from"./blocks.a7684095.js";import{a as J,b as K,c as P}from"./mealbuy.3f01c163.js";import{s as Q}from"./list.1db9be99.js";import{m as X}from"./seller.b9776ff6.js";import{_ as Y}from"./user.4d579c29.js";import{m as Z}from"./seller.c6d1e739.js";import"./multiselector.e3a63f5d.js";import"./weixin.864acb91.js";import"./chat.b31cc7ff.js";const k=f=>(H("data-v-0ebf5bba"),f=f(),L(),f),ee={class:"main w pt10"},te={class:"round-edge pd10 bgf"},le={class:"pd10"},se=p("\u8425\u9500"),oe=p("\u642D\u914D\u8D2D"),ae={class:"round-edge pd10 bgf mt20"},ie=k(()=>d("h3",{class:"pd10 mb20"},"\u642D\u914D\u8D2D\u8BBE\u7F6E",-1)),ne=p("\u9009\u62E9\u5546\u54C1"),de={class:"tips pl10 pr10 pt5 pb5 f-12 f-c60 flex-middle",style:{width:"100%"}},ce=p(" \u642D\u914D\u8D2D\u5546\u54C1\u5EFA\u8BAE2-10\u4E2A "),re={class:"uni-flex uni-row"},ue=["src"],_e={class:"l-h20 width-surplus ml10"},me=k(()=>d("text",{class:"ml20 mr20"},"\u63D0\u4EA4",-1)),pe={setup(f){const w=M(),b=R(!1),r=V({visible:!1,selected:[]}),t=V({title:"\u642D\u914D\u4F18\u60E0",items:[],total:[],status:1});W(()=>{w.params.id>0&&J({meal_id:w.params.id},o=>{o&&(Object.assign(t,o,{status:parseInt(o.status)}),t.items.forEach(l=>{r.selected.push(parseInt(l.goods_id))}))})});const E=o=>{t.status=o},j=()=>{if(t.items.length<1)return D.warning("\u8BF7\u9009\u62E9\u5546\u54C1");let o=[];for(let l in t.items)o.push(t.items[l].goods_id);t.meal_id>0?K(Object.assign(t,{selected:o}),l=>{x({title:"\u63D0\u793A",message:"\u642D\u914D\u8D2D\u8BBE\u7F6E\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:function(){C("/seller/mealbuy/list")}})},b):P(Object.assign(t,{selected:o}),l=>{x({title:"\u63D0\u793A",message:"\u642D\u914D\u8D2D\u5546\u54C1\u6DFB\u52A0\u6210\u529F\uFF01",type:"success",position:"bottom-left",duration:2e3,onClose:function(){C("/seller/mealbuy/list")}})},b)},I=o=>{r.visible=!1,r.selected=o||[],r.selected.length>0&&N()};function N(){G({items:r.selected.join(","),queryspec:!0,if_show:1},o=>{t.items=o.list;let l=[0,0];t.items.forEach(_=>{let c=[_.specs[0].price,_.specs[0].price];_.specs.forEach(m=>{c[0]>m.price&&(c[0]=m.price),c[1]<m.price&&(c[1]=m.price)}),l[0]+=Number(c[0]),l[1]+=Number(c[1]),t.total=l[0]==l[1]?l[0]:l})})}return(o,l)=>{const _=i("el-col"),c=i("el-breadcrumb-item"),m=i("el-breadcrumb"),h=i("el-input"),u=i("el-form-item"),y=i("el-button"),F=i("WarningFilled"),S=i("el-icon"),g=i("el-table-column"),U=i("el-table"),B=i("el-switch"),O=i("el-form"),q=i("el-row");return $(),z(A,null,[e(X),d("div",ee,[e(q,{gutter:12},{default:s(()=>[e(_,{span:4},{default:s(()=>[e(Z)]),_:1}),e(_,{span:20},{default:s(()=>[d("div",te,[d("div",le,[e(m,{separator:"/"},{default:s(()=>[e(c,null,{default:s(()=>[se]),_:1}),e(c,null,{default:s(()=>[oe]),_:1})]),_:1})])]),d("div",ae,[ie,e(O,{inline:!0,class:"pd10"},{default:s(()=>[e(u,{label:"\u6807\u9898","label-width":100},{default:s(()=>[e(h,{modelValue:n(t).title,"onUpdate:modelValue":l[0]||(l[0]=a=>n(t).title=a),clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"\u9009\u62E9\u5546\u54C1","label-width":100},{default:s(()=>[e(y,{onClick:l[1]||(l[1]=a=>n(r).visible=!0),type:"primary",plain:""},{default:s(()=>[ne]),_:1})]),_:1}),e(u,{label:" ","label-width":100,style:{"margin-right":"0"}},{default:s(()=>[d("p",de,[e(S,{size:14,class:"mr5"},{default:s(()=>[e(F)]),_:1}),ce]),e(U,{data:n(t).items,border:!0,stripe:!0,"header-cell-style":{background:"#f3f8fe"}},{default:s(()=>[e(g,{label:"\u5546\u54C1\u4FE1\u606F"},{default:s(a=>[d("div",re,[d("p",null,[d("img",{src:a.row.goods_image||a.row.default_image,width:"60",height:"60"},null,8,ue)]),d("p",_e,v(a.row.goods_name),1)])]),_:1}),e(g,{label:"\u5E93\u5B58",width:"100"},{default:s(a=>[p(v(a.row.stocks),1)]),_:1}),e(g,{label:"\u4EF7\u683C",width:"100"},{default:s(a=>[p(v(a.row.price),1)]),_:1})]),_:1},8,["data"])]),_:1}),e(u,{label:"\u539F\u603B\u4EF7","label-width":100},{default:s(()=>[e(h,{value:n(t).total.length>0?n(t).total.join(" - "):n(t).total,readonly:""},null,8,["value"])]),_:1}),e(u,{label:"\u642D\u914D\u4EF7","label-width":100},{default:s(()=>[e(h,{modelValue:n(t).price,"onUpdate:modelValue":l[2]||(l[2]=a=>n(t).price=a),clearable:""},null,8,["modelValue"])]),_:1}),e(u,{label:"\u542F\u7528","label-width":100},{default:s(()=>[e(B,{modelValue:n(t).status,"onUpdate:modelValue":l[3]||(l[3]=a=>n(t).status=a),onChange:E,"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1}),e(u,{label:" ","label-width":100,class:"mt10"},{default:s(()=>[e(y,{type:"primary",onClick:j,loading:b.value},{default:s(()=>[me]),_:1},8,["loading"])]),_:1})]),_:1})])]),_:1})]),_:1})]),e(Q,{title:"\u9009\u62E9\u5546\u54C1",visible:n(r).visible,onClose:I,selected:n(r).selected,limit:10},null,8,["visible","selected"]),e(Y)],64)}}};var ke=T(pe,[["__scopeId","data-v-0ebf5bba"]]);export{ke as default};
