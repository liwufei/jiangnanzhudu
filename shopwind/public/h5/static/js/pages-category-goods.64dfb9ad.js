(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-category-goods"],{"23f2":function(t,e,i){var n=i("756a");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("967d").default;a("90e3d55a",n,!0,{sourceMap:!1,shadowMode:!1})},"447e":function(t,e,i){"use strict";i.r(e);var n=i("622c"),a=i("6853");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("c77c");var l=i("828b"),o=Object(l["a"])(a["default"],n["b"],n["c"],!1,null,"7d690d00",null,!1,n["a"],void 0);e["default"]=o.exports},"5c53":function(t,e,i){"use strict";i("6a54");var n=i("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("64aa"),i("bf0f");var a=n(i("9173")),s=n(i("ac89")),l=n(i("2496")),o={data:function(){return{selected:0,client:{},gallery:{list:[],children:[],goodsnum:0},cart:{total:0,quantity:{}},flyball:{x:0,y:0},popup:{e:"",item:""},style:"",loadend:!1}},methods:{change:function(t,e){this.selected=e.cate_id,a.default.children(this,this.selected)},showPopup:function(t,e,i){if(console.log(t),this.popup.e=t,"specs"==e)this.popup.item=i;else if("cart"==e&&this.cart.total<=0)return!1;return this.$refs[e].open()},close:function(t){t()},confirm:function(t,e){var i=this;l.default.add(this,e,Number(e.quantity),(function(){i.$refs.flyball.drop({x:i.popup.e.detail.x,y:i.popup.e.detail.y})})),t()},changeQty:function(t,e,i){var n=this;e.default_spec&&(e.spec_id=e.default_spec),l.default.update(this,e,"plus"==i?1:-1,(function(){"plus"==i&&n.$refs.flyball.drop({x:t.detail.x,y:t.detail.y})}))}},onLoad:function(t){a.default.category(this)},onShow:function(){this.client=s.default.getClientRect(),l.default.build(this)},onReady:function(){this.flyball.x=.6*this.client.window.width,this.flyball.y=this.client.window.height,this.style="height:"+this.client.window.height+"px"}};e.default=o},"622c":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uniIcons:i("ea5d").default,uniPopup:i("d1df").default,myPopupSpecs:i("e403").default,myFlyball:i("a60e").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"fixed-top pt10"},[t.gallery.list.length>0?i("v-uni-view",{staticClass:"uni-flex uni-row"},[i("v-uni-scroll-view",{staticClass:"scroller",style:t.style,attrs:{"scroll-x":!1,"scroll-y":!0}},[t._l(t.gallery.list,(function(e,n){return i("v-uni-view",{key:n},[i("v-uni-view",{class:["uni-center uni-ellipsis f-15 pl10 pr10 item",e.cate_id==t.selected?"f-red uni-bold selected f-16":""],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.change(i,e)}}},[t._v(t._s(e.cate_name))])],1)})),i("v-uni-view",{staticClass:"pb10 pt10"})],2),i("v-uni-scroll-view",{staticClass:"uni-flex uni-column width-surplus mr10 goodslist",style:t.style,attrs:{"scroll-x":!1,"scroll-y":!0}},[t.gallery.children.length>0&&t.gallery.goodsnum>0?i("v-uni-view",[t._l(t.gallery.children,(function(e,n){return i("v-uni-view",{key:n},[e.items&&e.items.length>0?i("v-uni-view",{staticClass:"bgf round-edge mb10",staticStyle:{"min-width":"510rpx"}},[i("v-uni-navigator",{staticClass:"uni-flex width-between pt10",attrs:{url:"/pages/search/goods?cate_id="+e.cate_id,"hover-class":"none"}},[i("v-uni-text",{staticClass:"f-15 uni-bold ml10"},[t._v(t._s(e.cate_name))]),i("uni-icons",{staticClass:"mr10",attrs:{type:"arrowright"}})],1),i("v-uni-view",{staticClass:"uni-flex uni-row pb10 flex-wrap"},t._l(e.items,(function(e){return i("v-uni-view",{key:e.goods_id,class:["uni-flex uni-row item"]},[i("v-uni-navigator",{staticClass:"image relative",attrs:{url:"/pages/goods/detail?id="+e.goods_id,"hover-class":"none"}},[i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.promotion&&"limitbuy"==e.promotion.type,expression:"item.promotion && item.promotion.type == 'limitbuy'"}],staticClass:"absolute uni-center f-white skill f-10"},[t._v("秒杀")]),i("v-uni-image",{attrs:{src:e.default_image,mode:"widthFix"}})],1),i("v-uni-view",{staticClass:"rb width-surplus"},[i("v-uni-view",{staticClass:"line-clamp-2 ml10 mr10 l-h17 uni-bold desc"},[t._v(t._s(e.goods_name))]),i("v-uni-view",{staticClass:"f-12 f-gray mr10 ml10 mt5"},[t._v("附近有"+t._s(e.sales||0)+"人已买")]),i("v-uni-view",{staticClass:"uni-flex uni-row mt5 flex-middle width-between"},[i("v-uni-view",{staticClass:"width-surplus ml10"},[i("v-uni-view",{staticClass:"del f-gray f-14 l-h17"},[e.promotion?i("v-uni-text",[t._v(t._s(t._f("currency")(e.price)))]):e.mkprice>0?i("v-uni-text",[t._v(t._s(t._f("currency")(e.mkprice)))]):t._e()],1),i("v-uni-view",{staticClass:"f-red f-14 l-h20"},[e.promotion?i("v-uni-text",[t._v(t._s(t._f("currency")(e.promotion.price)))]):i("v-uni-text",[t._v(t._s(t._f("currency")(e.price)))])],1)],1),0==e.spec_qty?i("v-uni-view",{staticClass:"uni-flex uni-row flex-middle flex-end"},[t.cart.quantity[e.goods_id]?i("uni-icons",{attrs:{type:"minus-filled",size:"50",color:"#cccccc"},nativeOn:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeQty(i,e,"minus")}}}):t._e(),t.cart.quantity[e.goods_id]?i("v-uni-text",{staticClass:"quantity uni-center"},[t._v(t._s(t.cart.quantity[e.goods_id].total))]):t._e(),i("uni-icons",{attrs:{type:"plus-filled",size:"50",color:"var(--color-red)"},nativeOn:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeQty(i,e,"plus")}}})],1):i("v-uni-view",{staticClass:"mybutton relative flex-end",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showPopup(i,"specs",e)}}},[i("v-uni-text",{staticClass:"f-white f-12"},[t._v("选规格")]),t.cart.quantity[e.goods_id]?i("v-uni-text",{staticClass:"badge f-c55 uni-bold absolute uni-center"},[t._v(t._s(t.cart.quantity[e.goods_id].total))]):t._e()],1)],1)],1)],1)})),1)],1):t._e()],1)})),i("v-uni-view",{staticClass:"pt5 pb10 uni-center uni-text-gray mb10"},[t._v("—— 已经到底了 ——")]),i("v-uni-view",{staticClass:"pb5"})],2):i("v-uni-view",{staticClass:"bgf round-edge",style:t.style},[t.loadend?i("v-uni-view",{staticClass:"uni-flex uni-column uni-center"},[i("i",{staticClass:"iconfont iconmeiyoudingdan-01 f-gray empty-icons"}),i("v-uni-text",{staticClass:"f-gray"},[t._v("分类下无商品")])],1):t._e()],1)],1)],1):t.loadend?i("v-uni-view",{staticClass:"iconfont iconmeiyoudingdan-01 f-gray flex-center empty-icons"}):t._e(),i("uni-popup",{ref:"specs",staticClass:"relative",staticStyle:{"z-index":"100"},attrs:{type:"bottom"}},[i("my-popup-specs",{attrs:{item:t.popup.item},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.close.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.confirm.apply(void 0,arguments)}}})],1),i("my-flyball",{ref:"flyball",attrs:{endPos:t.flyball,size:6}})],1)},s=[]},6853:function(t,e,i){"use strict";i.r(e);var n=i("5c53"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"756a":function(t,e,i){var n=i("c86c");e=n(!1),e.push([t.i,".scroller[data-v-7d690d00]{width:%?180?%}.scroller .item[data-v-7d690d00]{padding:%?20?% %?16?%}.goodslist .item[data-v-7d690d00]{width:calc(100% - %?40?%);margin:%?20?%}.goodslist .item.current[data-v-7d690d00]{background-color:#fff7e7}.goodslist .item .desc[data-v-7d690d00]{min-height:auto}.goodslist .item uni-image[data-v-7d690d00]{width:%?180?%;height:%?180?%;background-color:#f1f1f1;border-radius:%?20?%}.goodslist .item .skill[data-v-7d690d00]{width:%?70?%;height:%?30?%;line-height:%?30?%;background:#ff570a;left:%?0?%;top:%?0?%;z-index:10;border-radius:%?20?% 0 %?20?%}.goodslist .item .quantity[data-v-7d690d00]{width:%?30?%}.goodslist .mybutton[data-v-7d690d00]{background:var(--color-red);padding:%?2?% %?8?%;line-height:%?46?%;min-width:%?100?%}.goodslist .badge[data-v-7d690d00],\n.limitbuy .badge[data-v-7d690d00]{background:#f4f400;border-radius:50%;left:auto;top:%?-20?%;right:%?0?%;padding:%?6?% %?8?%;min-width:%?26?%;line-height:%?26?%;font-size:%?20?%}[data-v-7d690d00] .bottom .uni-popup__wrapper-box{\nbottom:%?92?%\n}",""]),t.exports=e},9173:function(t,e,i){"use strict";var n=i("f5bd").default;i("bf0f"),i("2797"),i("64aa");var a=n(i("0ed1"));n(i("ac89"));function s(t,e){t.loadend=!1,a.default.request("category/list",{parent_id:e,store_id:0,if_show:1,page_size:100},(function(e){var i=e.data.list||[];0==i.length&&(t.loadend=!0),t.gallery.goodsnum=0,t.gallery.children=i,i.forEach((function(e){a.default.request("goods/list",{cate_id:e.cate_id,page_size:50},(function(i){0==i.code&&(e.items=i.data.list||[],t.gallery.goodsnum+=Number(i.data.pagination.total),t.$forceUpdate()),t.loadend=!0}),!0)}))}))}t.exports={category:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id list.js 2019.10.26 $
 * @author winder
 */
function(t){a.default.request("category/list",{parent_id:0,store_id:0,if_show:1,page_size:100},(function(e){if(0==e.code){var i=e.data.list;i.length>0&&(t.selected=i[0].cate_id),t.gallery.list=i||[],s(t,t.selected)}}))},children:s}},c77c:function(t,e,i){"use strict";var n=i("23f2"),a=i.n(n);a.a}}]);