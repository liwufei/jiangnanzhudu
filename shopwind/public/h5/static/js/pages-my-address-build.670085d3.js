(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-address-build"],{"12d4":function(e,t,n){"use strict";var a=n("f323"),i=n.n(a);i.a},"1ff7":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5c47");a(n("0ed1"));var i={name:"MyFooter",props:{bgcolor:{type:String,default:"var(--color-basic)"},fixed:{type:Boolean,default:!0}},data:function(){return{height:0}},mounted:function(){var e=this,t=uni.createSelectorQuery().in(this);t.select(".wraper").boundingClientRect((function(t){e.height=t?Math.floor(t.height):0})).exec()}};t.default=i},"2a9d":function(e,t,n){"use strict";var a=n("572e"),i=n.n(a);i.a},"2f8d":function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".footer[data-v-fb052a5a]{height:var(--height)}.footer .wraper[data-v-fb052a5a]{background-color:var(--bgcolor);\n\t/* 适配iphoneX的底部*/padding-bottom:constant(safe-area-inset-bottom);\n\t/*兼容 IOS>11.2*/padding-bottom:env(safe-area-inset-bottom)}",""]),e.exports=t},"451c":function(e,t,n){"use strict";n("6a54");var a=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(n("2634")),s=a(n("2fdc")),d=a(n("ac89")),r=a(n("976d")),l=(a(n("62a0")),{data:function(){return{addr_id:0,address:{},regions:[],multiIndex:[0,0,0],selected:"请选择",redirect:"",labels:["家","公司","学校"]}},methods:{location:function(){var e=this;return(0,s.default)((0,i.default)().mark((function t(){var n;return(0,i.default)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e,uni.chooseLocation({latitude:n.address.latitude,longitude:n.address.longitude,success:function(e){n.address.latitude=e.latitude,n.address.longitude=e.longitude,n.$forceUpdate()}});case 2:case"end":return t.stop()}}),t)})))()},columnchange:function(e){this.multiIndex[e.detail.column]=e.detail.value,0==e.detail.column?this.multiIndex=[e.detail.value,0,0]:1==e.detail.column&&(this.multiIndex[2]=0),r.default.regions(this,0)},labelClick:function(e){this.address.label=e,this.$forceUpdate()},change:function(e){this.address.defaddr=!!e.detail.value},save:function(e){r.default.save(this)},clearInput:function(e,t){this.address[t]=""}},onLoad:function(e){e.id>0&&(this.addr_id=e.id,uni.setNavigationBarTitle({title:"编辑收货地址"})),this.redirect=decodeURIComponent(e.redirect||"/pages/my/address/list"),d.default.verifyLogin(!0,this.$mp.page.route)&&r.default.regions(this,this.addr_id)}});t.default=l},"4bf4":function(e,t,n){"use strict";n.r(t);var a=n("78f1"),i=n("5201");for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("2a9d");var d=n("828b"),r=Object(d["a"])(i["default"],a["b"],a["c"],!1,null,"0afda169",null,!1,a["a"],void 0);t["default"]=r.exports},5201:function(e,t,n){"use strict";n.r(t);var a=n("451c"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},"572e":function(e,t,n){var a=n("b8d7");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("620d9e9b",a,!0,{sourceMap:!1,shadowMode:!1})},"78f1":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var a={uniIcons:n("ea5d").default,myFooter:n("cfe7").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",[n("v-uni-view",{staticClass:"round-edge bgf ml10 mr10 mt10 mb10 pl10 pt5 pr10 pb10 form"},[n("v-uni-view",{staticClass:"uni-flex uni-row pd10 flex-middle f-16"},[n("v-uni-label",[e._v("联 系 人")]),n("v-uni-input",{staticClass:"width-surplus",attrs:{maxlength:"30",placeholder:"联系人名字"},model:{value:e.address.consignee,callback:function(t){e.$set(e.address,"consignee","string"===typeof t?t.trim():t)},expression:"address.consignee"}}),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:e.address.consignee,expression:"address.consignee"}],staticClass:"ml10",attrs:{type:"closeempty",color:"gray"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInput(t,"consignee")}}})],1),n("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16"},[n("v-uni-label",[e._v("手机号码")]),n("v-uni-input",{staticClass:"width-surplus",attrs:{maxlength:"11",type:"number",placeholder:"11位手机号"},model:{value:e.address.phone_mob,callback:function(t){e.$set(e.address,"phone_mob",e._n(t))},expression:"address.phone_mob"}}),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:e.address.phone_mob,expression:"address.phone_mob"}],staticClass:"ml10",attrs:{type:"closeempty",color:"gray"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInput(t,"phone_mob")}}})],1),n("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16"},[n("v-uni-label",[e._v("所在地区")]),n("v-uni-picker",{staticClass:"width-surplus",attrs:{mode:"multiSelector","range-key":"name",value:e.multiIndex,range:e.regions},on:{columnchange:function(t){arguments[0]=t=e.$handleEvent(t),e.columnchange.apply(void 0,arguments)}}},[e._v(e._s(e.selected))]),n("uni-icons",{attrs:{type:"arrowright",color:"gray"}})],1),n("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16"},[n("v-uni-label",[e._v("详细地址")]),n("v-uni-input",{staticClass:"width-surplus",attrs:{placeholder:"街道/小区/楼栋/房号"},model:{value:e.address.address,callback:function(t){e.$set(e.address,"address",t)},expression:"address.address"}}),n("uni-icons",{directives:[{name:"show",rawName:"v-show",value:e.address.address,expression:"address.address"}],staticClass:"ml10",attrs:{type:"closeempty",color:"gray"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.clearInput(t,"address")}}})],1),n("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16 width-between"},[n("v-uni-label",[e._v("位置坐标")]),e.address.latitude&&e.address.longitude?n("v-uni-text",{staticClass:"f-red",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.location.apply(void 0,arguments)}}},[e._v("已设置，点此修改")]):n("uni-icons",{attrs:{type:"location"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.location.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"uni-flex uni-row bt pd10 flex-middle f-16 width-between"},[n("v-uni-label",[e._v("默认地址")]),n("v-uni-switch",{attrs:{checked:1==e.address.defaddr,color:"#fc2b34"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.change.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"pt10 labels"},e._l(e.labels,(function(t,a){return n("v-uni-text",{key:a,class:["item f-c55 pl10 pr10 ml10 mr10",e.address.label==t?"selected":""],on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.labelClick(t)}}},[e._v(e._s(t))])})),1),n("v-uni-view",{staticClass:"uni-center f-white mybutton ml10 mr10 mb10 f-16 uni-bold",staticStyle:{"margin-top":"60rpx"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.save.apply(void 0,arguments)}}},[e._v("保存")])],1),n("my-footer")],1)},s=[]},8370:function(e,t,n){"use strict";n.r(t);var a=n("1ff7"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},"976d":function(e,t,n){"use strict";var a=n("f5bd").default,i=a(n("2634")),s=a(n("2fdc")),d=a(n("0ed1")),r=a(n("ac89")),l=a(n("d760"));function o(){return o=(0,s.default)((0,i.default)().mark((function e(t){var n,a,s,r=arguments;return(0,i.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:0,a=null,!(n>0)){e.next=7;break}return e.next=5,d.default.promise("address/read",{addr_id:n});case 5:t.address=e.sent,t.address&&(a=[t.address.province,t.address.city,t.address.district]);case 7:return e.next=9,l.default.build(t.multiIndex,a);case 9:s=e.sent,t.address.region_id=s.id,t.selected=s.label.join(" / "),t.regions=s.multiList;case 13:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}e.exports={regions:function(e){return o.apply(this,arguments)},save:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id build.js 2019.10.19 $
 * @author winder
 */
function(e){d.default.request(e.addr_id?"address/update":"address/add",e.address,(function(t){if(0==t.code){r.default.spliceUrl(e.redirect,{addr_id:t.data.addr_id});uni.showToast({title:"地址保存成功",duration:2e3,success:function(){setTimeout((function(){uni.navigateBack()}),2e3)}})}else uni.showToast({title:t.message,icon:"none"})}),!1)}}},b5ac:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){}));var a=function(){var e=this.$createElement,t=this._self._c||e;return t("v-uni-view",{staticClass:"footer",style:{"--bgcolor":this.bgcolor||"none","--height":this.height+"px"}},[t("v-uni-view",{class:["wraper",this.fixed?"fixed-bottom":""]},[this._t("default")],2)],1)},i=[]},b8d7:function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".form uni-label[data-v-0afda169]{width:%?170?%}.form uni-switch[data-v-0afda169]{-webkit-transform:scale(.9);transform:scale(.9)}.labels .item[data-v-0afda169]{border:%?2?% #ddd solid;border-radius:%?8?%;padding:%?8?% %?30?%}.labels .item.selected[data-v-0afda169]{border:%?2?% var(--color-red) solid;background-color:#fdf2ef;color:var(--color-red)}",""]),e.exports=t},cfe7:function(e,t,n){"use strict";n.r(t);var a=n("b5ac"),i=n("8370");for(var s in i)["default"].indexOf(s)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("12d4");var d=n("828b"),r=Object(d["a"])(i["default"],a["b"],a["c"],!1,null,"fb052a5a",null,!1,a["a"],void 0);t["default"]=r.exports},d760:function(e,t,n){"use strict";var a=n("f5bd").default;n("e966"),n("bf0f"),n("2797"),n("aa9c"),n("dd2b");var i=a(n("39d8")),s=a(n("2634")),d=a(n("2fdc")),r=a(n("0ed1")),l=a(n("ac89"));function o(){return o=(0,d.default)((0,s.default)().mark((function e(t){var n,a,i,d,r,l,o=arguments;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:null,a=o.length>2&&void 0!==o[2]?o[2]:"region/list",i=o.length>3&&void 0!==o[3]?o[3]:"region_id",d=o.length>4&&void 0!==o[4]?o[4]:"name",r=o.length>5&&void 0!==o[5]?o[5]:"parent_id",e.next=7,u(t,n,a,i,d,r);case 7:return l=e.sent,e.abrupt("return",v(l,t,i,d));case 9:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function u(e,t,n,a,i,s){return c.apply(this,arguments)}function c(){return c=(0,d.default)((0,s.default)().mark((function e(t,n,a,d,o,c){var v,p,h,m=arguments;return(0,s.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return p=m.length>6&&void 0!==m[6]?m[6]:[],h=m.length>7&&void 0!==m[7]?m[7]:0,l.default.isEmpty(t[h-1])&&(t[h-1]=0),e.next=5,r.default.promise(a,(v={},(0,i.default)(v,c,h>0?p[h-1].list[t[h-1]][d]:0),(0,i.default)(v,"if_show",1),(0,i.default)(v,"page_size",1e3),v));case 5:if(p[h]=e.sent,!(p[h].list.length>0)){e.next=9;break}return l.default.isEmpty(n)||f(p[h].list,t,n[h],o,h),e.abrupt("return",u(t,n,a,d,o,c,p,++h));case 9:return e.abrupt("return",p.length>0?p.splice(0,p.length-1):p);case 10:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function f(e,t,n,a,i){if(!l.default.isEmpty(n))for(var s in e)e[s][a]==n&&(t[i]=parseInt(s))}function v(e,t,n,a){var i=[],s=[];e.forEach((function(e,n){i[n]=e.list[t[n]][a],s[n]=e.list}));for(var d=e.length;d<t.length;d++)s.push([]);return{id:s[i.length-1][t[i.length-1]][n],label:i,multiList:s}}e.exports={build:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id selector.js 2019.10.19 $
 * @author winder
 */
function(e){return o.apply(this,arguments)}}},f323:function(e,t,n){var a=n("2f8d");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("e74e04f6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);