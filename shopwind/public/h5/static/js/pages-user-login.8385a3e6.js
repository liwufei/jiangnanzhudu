(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-login"],{"062d":function(n,e,t){"use strict";t.r(e);var i=t("804e"),o=t("2d1d");for(var a in o)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t("e9a2");var s=t("828b"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"1c9e3ce0",null,!1,i["a"],void 0);e["default"]=c.exports},"227c":function(n,e,t){"use strict";var i=t("f5bd").default;t("e838");var o=i(t("0ed1")),a=i(t("ac89"));function s(n){uni.showToast({title:"登录中...",icon:"loading",duration:5e4}),n.terminal=function(){return"H5"}();var e=uni.getStorageSync("visitor")||{};e.userid&&"password"!=n.logintype&&"verifycode"!=n.logintype?c(n):o.default.request("auth/login",n,(function(e){if(0==e.code&&e.data){var t=e.data;if(n.requiresSeller&&!t.user_info.store_id)return uni.showModal({title:"提示",content:"对不起，您还不是卖家",showCancel:!1}),!1;uni.setStorageSync("access_token",t.token),uni.setStorageSync("visitor",t.user_info),uni.hideToast(),uni.showToast({title:"登录成功",duration:1e3,complete:function(){var n=uni.getStorageSync("redirect");setTimeout((function(){a.default.redirect(n)}),1e3),uni.removeStorageSync("redirect")}})}else e.message&&uni.showToast({title:e.message,icon:"none",duration:5e3})}))}function c(n){o.default.request("user/bind",n,(function(n){if(0==n.code){var e=uni.getStorageSync("visitor")||{};uni.setStorageSync("visitor",Object.assign(e,{openid:n.data.weixin})),uni.showToast({title:"绑定成功",duration:1e3,complete:function(){var n=uni.getStorageSync("redirect");setTimeout((function(){a.default.redirect(a.default.isEmpty(n)?"/pages/user/index":n)}),1e3),uni.removeStorageSync("redirect")}})}else n.message&&uni.showToast({title:n.message,icon:"none",duration:1e3,complete:function(){setTimeout((function(){a.default.redirect("/pages/user/index")}),1e3)}})}))}n.exports={site:
/**
 * @link https://www.shopwind.net/
 * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.
 *
 * This is not free software. Do not use it for commercial purposes. 
 * If you need commercial operation, please contact us to purchase a license.
 * @license https://www.shopwind.net/license/
 *
 * @Id login.js 2019.10.9 $
 * @author winder
 */
function(n){o.default.request("site/read",null,(function(n){n.code}))},login:s,bind:c,mblogin:function(n,e){1==n.accord?("password"==n.logintype?(e.phone_mob=n.phone_mob,e.password=n.password):"verifycode"==n.logintype&&(e.phone_mob=n.phone_mob,e.verifycode=n.verifycode,e.verifycodekey=uni.getStorageSync("smsverifycodekey")),s(e)):uni.showModal({title:"提示",content:"请勾选并同意《用户协议》和《隐私政策》",showCancel:!1})},unilogin:function(n,e){if(1==n.accord){var t=Math.floor(parseFloat(uni.getSystemInfoSync().system));"apple"==e.logintype&&t<13?uni.showModal({title:"提示",content:"iOS13及以上系统版本才支持苹果登录",showCancel:!1}):uni.login({provider:e.logintype,success:function(){uni.getUserInfo({provider:e.logintype,lang:"zh_CN",success:function(n){var t=n.userInfo;Object.assign(e,{unionid:t.unionId?t.unionId:t.openId?t.openId:"",openid:t.openId?t.openId:"",portrait:t.avatarUrl,nickname:t.fullName?t.fullName.familyName+t.fullName.givenName:t.nickName}),s(e)},fail:function(n){uni.showModal({title:"提示",content:n.errMsg,showCancel:!1})}})},fail:function(n){uni.showModal({title:"提示",content:n.errMsg,showCancel:!1})}})}else uni.showModal({title:"提示",content:"请勾选并同意《用户协议》和《隐私政策》",showCancel:!1})},weblogin:function(n,e){1==n.accord?o.default.request("auth/connect",Object.assign(e,{callback:a.default.siteUrl()+"/pages/connect/callback"}),(function(n){0==n.code&&n.data&&(location.href=n.data.redirect)})):uni.showModal({title:"提示",content:"请勾选并同意《用户协议》和《隐私政策》",showCancel:!1})},sendcode:function(n,e,t){o.default.request("sms/send",{phone_mob:n,purpose:"verifycode"},(function(n){0==n.code?(uni.setStorageSync("smsverifycodekey",n.data.codekey),uni.showToast({title:n.message,success:function(){a.default.countDown(e,t)}})):uni.showToast({title:n.message,icon:"none"})}),!1)}}},"244a":function(n,e,t){var i=t("c86c");e=i(!1),e.push([n.i,".morenav[data-v-1c9e3ce0]{position:fixed;\n\t/* 需要高过头部和底部导航 */z-index:1000;width:%?220?%;\n\t/* height: 358rpx; */right:%?20?%;top:calc(var(--window-top) + %?80?%);\n\nbackground-color:hsla(0,0%,100%,.95);border-radius:%?10?%;box-shadow:%?0?% %?0?% %?4?% %?0?% #dedede}.morenav.leftbottom[data-v-1c9e3ce0]{top:auto;right:auto;left:0;bottom:%?180?%;border-radius:0 %?10?% %?10?% 0;background-color:hsla(0,0%,100%,.98)}.morenav .absolute[data-v-1c9e3ce0]{left:auto;background-color:rgba(0,0,0,.8);border-radius:%?0?% %?10?% %?10?% 0;right:%?-48?%;bottom:calc(50% - %?90?%);line-height:%?36?%}",""]),n.exports=e},"2d1d":function(n,e,t){"use strict";t.r(e);var i=t("3021"),o=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(a);e["default"]=o.a},3021:function(n,e,t){"use strict";t("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"uniPopupDialog",props:{beforeClose:{type:Boolean,default:!1},position:{type:String,default:"topright"}},data:function(){return{}},inject:["popup"],created:function(){this.popup.mkclick=!0},methods:{close:function(){this.popup.close()}}};e.default=i},4519:function(n,e,t){var i=t("d1c9");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var o=t("967d").default;o("5b5b2204",i,!0,{sourceMap:!1,shadowMode:!1})},"6b0d":function(n,e,t){"use strict";t.r(e);var i=t("cfe6"),o=t("cb7d");for(var a in o)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return o[n]}))}(a);t("8dee"),t("efc9");var s=t("828b"),c=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"6f7dde7a",null,!1,i["a"],void 0);e["default"]=c.exports},"804e":function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return i}));var i={uniIcons:t("ea5d").default},o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",[t("v-uni-view",{class:["morenav pl5 pr5 relative",n.position]},[t("v-uni-view",{staticClass:"uni-flex uni-column pl10 pr10"},[t("v-uni-navigator",{staticClass:"uni-flex uni-row flex-middle pt5 pb5 item",attrs:{url:"/pages/index/index","open-type":"switchTab","hover-class":"none"}},[t("uni-icons",{attrs:{size:"38",type:"home"}}),t("v-uni-text",{staticClass:"f-15 ml5"},[n._v("首页")])],1),t("v-uni-navigator",{staticClass:"uni-flex uni-row flex-middle pt5 pb5 bt item",attrs:{url:"/pages/cart/index","open-type":"switchTab","hover-class":"none"}},[t("uni-icons",{attrs:{size:"38",type:"cart"}}),t("v-uni-text",{staticClass:"f-15 ml5"},[n._v("购物车")])],1),t("v-uni-navigator",{staticClass:"uni-flex uni-row flex-middle pt5 pb5 bt item",attrs:{url:"/pages/user/index","open-type":"switchTab","hover-class":"none"}},[t("uni-icons",{attrs:{size:"38",type:"person"}}),t("v-uni-text",{staticClass:"f-15 ml5"},[n._v("我的")])],1),t("v-uni-navigator",{staticClass:"uni-flex uni-row flex-middle pt5 pb5 bt item",attrs:{url:"/pages/search/index","open-type":"redirect","hover-class":"none"}},[t("uni-icons",{attrs:{size:"38",type:"search"}}),t("v-uni-text",{staticClass:"f-15 ml5"},[n._v("搜索")])],1)],1),t("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"leftbottom"==n.position,expression:"position == 'leftbottom'"}],staticClass:"pl5 pr5 pt10 pb10 absolute f-white",on:{click:function(e){e.stopPropagation(),arguments[0]=e=n.$handleEvent(e),n.close()}}},[n._v("快"),t("br"),n._v("捷"),t("br"),n._v("导"),t("br"),n._v("航")])],1)],1)},a=[]},"8dee":function(n,e,t){"use strict";var i=t("4519"),o=t.n(i);o.a},"975c":function(n,e,t){"use strict";t("6a54");var i=t("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=i(t("ac89")),a=i(t("227c")),s={data:function(){return{logo:"",phone_mob:"",password:"",verifycode:"",logintype:"verifycode",eyeclose:!0,seconds:0,platform:"",client:"",accord:0}},methods:{clearInput:function(){this.phone_mob=""},getPhoneNumber:function(n){n.detail.code&&a.default.unilogin(this,{logintype:"weixin",getPhoneNumber:n.detail})},mblogin:function(n){a.default.mblogin(this,{logintype:this.logintype})},unilogin:function(n,e){a.default.unilogin(this,{logintype:e})},weblogin:function(n,e){a.default.weblogin(this,{logintype:e})},eyeclick:function(){this.eyeclose=!this.eyeclose},changelogin:function(n,e){this.logintype=e},sendcode:function(){var n=this;a.default.sendcode(this.phone_mob,(function(e){n.seconds=e}))},showPopup:function(n,e){return this.$refs[e].open()},pageback:function(){o.default.pageBack()},agreement:function(){this.accord=1==this.accord?0:1}},created:function(){this.platform=uni.getSystemInfoSync().platform,this.client=o.default.isWechat()?"weixin":o.default.isQqbrowser()?"qq":""},onLoad:function(n){n.redirect&&uni.setStorageSync("redirect",decodeURIComponent(n.redirect)),a.default.site(this)},onShow:function(){o.default.verifyLogin(!1,!1)&&o.default.redirect("/pages/index/index")}};e.default=s},cb7d:function(n,e,t){"use strict";t.r(e);var i=t("975c"),o=t.n(i);for(var a in i)["default"].indexOf(a)<0&&function(n){t.d(e,n,(function(){return i[n]}))}(a);e["default"]=o.a},ceeb:function(n,e,t){var i=t("c86c");e=i(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 此次放需要覆盖全局mian.css的样式  */uni-page-body[data-v-6f7dde7a]{background-color:#fff}body.?%PAGE?%[data-v-6f7dde7a]{background-color:#fff}",""]),n.exports=e},cfe6:function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return i}));var i={uniIcons:t("ea5d").default,uniPopup:t("d1df").default,myPopupMorenav:t("062d").default},o=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",[t("v-uni-view",{staticClass:"form"},[t("v-uni-view",{staticClass:"uni-flex uni-column mb10"},[n.logo?t("v-uni-image",{staticClass:"logo",attrs:{src:n.logo,mode:"widthFix"}}):t("v-uni-image",{staticClass:"logo",attrs:{src:"/static/images/logo.png",mode:"widthFix"}})],1),t("v-uni-view",{staticClass:"uni-flex uni-column pt10"},[t("v-uni-view",{staticClass:"uni-flex uni-row flex-middle pt10 pb10 mt10 item"},[t("v-uni-view",{staticClass:"f-18 mr5"},[t("v-uni-text",[n._v("+86")]),t("uni-icons",{attrs:{type:"arrowright"}})],1),t("v-uni-input",{staticClass:"flex-middle",attrs:{"placeholder-class":"placeholder",type:"number",maxlength:"11",placeholder:"请输入手机号"},model:{value:n.phone_mob,callback:function(e){n.phone_mob=e},expression:"phone_mob"}}),t("uni-icons",{directives:[{name:"show",rawName:"v-show",value:n.phone_mob,expression:"phone_mob"}],staticClass:"mr10 f-gray",attrs:{type:"closeempty",size:"36",color:""},on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.clearInput.apply(void 0,arguments)}}})],1),"password"==n.logintype?t("v-uni-view",{staticClass:"uni-flex uni-row flex-middle pt10 pb10 mt10 item"},[t("v-uni-input",{staticClass:"flex-middle",attrs:{maxlength:"20",password:n.eyeclose,"placeholder-class":"placeholder",placeholder:"请输入密码"},model:{value:n.password,callback:function(e){n.password=e},expression:"password"}}),t("v-uni-text",{class:["iconfont f-gray uni-bold mr10 ml10",n.eyeclose?"iconicon-eye-close":"iconyanjing1"],on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.eyeclick.apply(void 0,arguments)}}})],1):t("v-uni-view",{staticClass:"uni-flex uni-row flex-middle pt10 pb10 mt10 item"},[t("v-uni-input",{staticClass:"flex-middle",attrs:{maxlength:"20","placeholder-class":"placeholder",placeholder:"请输入短信验证码"},model:{value:n.verifycode,callback:function(e){n.verifycode=e},expression:"verifycode"}}),n.seconds<=0?t("v-uni-text",{class:["iconfont ml10 f-red"],on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.sendcode.apply(void 0,arguments)}}},[n._v("获取验证码")]):t("v-uni-text",{class:["iconfont ml10 f-gray"]},[n._v(n._s(n.seconds)+"秒后重发")])],1),t("v-uni-view",{staticClass:"mt10 pt5 f-gray f-13"},[t("v-uni-view",{staticClass:"uni-flex uni-row flex-wrap flex-middle"},[t("v-uni-label",{on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.agreement.apply(void 0,arguments)}}},[t("v-uni-radio",{attrs:{checked:!0,color:1==n.accord?"#0A98D5":"#dddddd"}}),"verifycode"==n.logintype?t("v-uni-text",[n._v("未注册手机验证后自动注册，")]):n._e(),t("v-uni-text",[n._v("我已阅读并同意")])],1),t("v-uni-navigator",{staticClass:"f-blue",attrs:{url:"/pages/article/detail?id=5","hover-class":"none"}},[n._v("《用户协议》")]),n._v("和"),t("v-uni-navigator",{staticClass:"f-blue",attrs:{url:"/pages/article/detail?id=6","hover-class":"none"}},[n._v("《隐私政策》")])],1)],1),t("v-uni-view",{staticClass:"mt10"},[t("v-uni-view",{staticClass:"mt10 mybutton f-white uni-center f-16",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.mblogin.apply(void 0,arguments)}}},[n._v(n._s("password"==n.logintype?"立即登录":"登录/注册"))])],1),t("v-uni-view",{staticClass:"mt10 pt5 f-15 f-blue uni-center"},["password"==n.logintype?t("v-uni-text",{on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.changelogin(e,"verifycode")}}},[n._v("验证码登录")]):t("v-uni-text",{on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.changelogin(e,"password")}}},[n._v("账号密码登录")])],1)],1),t("v-uni-view",{staticClass:"uni-flex uni-column mt10 mb10 pt10 flex-middle flex-center"},[t("v-uni-text",{staticClass:"uni-text-gray mt10 pt10 f-15"},[n._v("——— 合作账号登录 ———")]),t("v-uni-view",{staticClass:"uni-flex uni-row mt10 pt10"},["weixin"==n.client?t("v-uni-view",{staticClass:"uni-center mt10 mr10 wxlogin",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.weblogin(e,"weixin")}}},[t("uni-icons",{attrs:{type:"weixin",size:"60",color:"#fff"}})],1):n._e(),t("v-uni-view",{staticClass:"uni-center mt10 mr10 qqlogin",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.weblogin(e,"qq")}}},[t("uni-icons",{attrs:{type:"qq",size:"60",color:"#fff"}})],1),"weixin"!=n.client&&"qq"!=n.client?t("v-uni-view",{staticClass:"uni-center mt10 ml10 mr10 alipaylogin",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.weblogin(e,"alipay")}}},[t("v-uni-view",{staticClass:"iconfont alipay"})],1):n._e()],1)],1)],1),t("v-uni-view",{staticClass:"morenavh5"},[t("v-uni-view",{staticClass:"pl5 pr5 pt10 pb10 absolute f-white",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.showPopup(e,"morenavh5")}}},[n._v("快"),t("br"),n._v("捷"),t("br"),n._v("导"),t("br"),n._v("航")]),t("uni-popup",{ref:"morenavh5",attrs:{type:"dialog"}},[t("my-popup-morenav",{attrs:{position:"leftbottom"}})],1)],1)],1)},a=[]},d1c9:function(n,e,t){var i=t("c86c");e=i(!1),e.push([n.i,"/**\r\n * @link https://www.shopwind.net/\r\n * @copyright Copyright (c) 2018 ShopWind Inc. All Rights Reserved.\r\n *\r\n * This is not free software. Do not use it for commercial purposes. \r\n * If you need commercial operation, please contact us to purchase a license.\r\n * @license https://www.shopwind.net/license/\r\n *\r\n * @Id login.css 2019.10.7 $\r\n * @author winder\r\n */uni-page-body>uni-view[data-v-6f7dde7a]::before{\r\n\t/* background-color: #FFFFFF; */}.logo[data-v-6f7dde7a]{width:%?160?%;height:%?160?%;margin:0 auto;border-radius:%?30?%}.form[data-v-6f7dde7a]{padding:%?40?% %?60?% %?60?% %?60?%}.form .title[data-v-6f7dde7a]{font-size:%?50?%;font-weight:500}.form .item[data-v-6f7dde7a]{margin-top:%?24?%;border-bottom:%?1?% #dedede solid}.form .item uni-input[data-v-6f7dde7a],\r\n.form .item .placeholder[data-v-6f7dde7a]{font-size:%?36?%}.form .item .placeholder[data-v-6f7dde7a]{color:#b4b4b4}.form uni-radio[data-v-6f7dde7a]{-webkit-transform:scale(.7);transform:scale(.7)}.wxlogin[data-v-6f7dde7a],\r\n.qqlogin[data-v-6f7dde7a],\r\n.applelogin[data-v-6f7dde7a]{width:%?90?%;height:%?90?%;line-height:%?90?%;border-radius:50%;margin:0 %?30?%}.wxlogin[data-v-6f7dde7a]{background-color:#04be02;padding:0}.wxlogin[data-v-6f7dde7a]::after{border:0}.qqlogin[data-v-6f7dde7a]{background-color:#24c9fd}.alipaylogin .iconfont[data-v-6f7dde7a]{font-size:%?90?%;line-height:%?56?%}.applelogin[data-v-6f7dde7a]{background-color:#000}.applelogin .iconfont[data-v-6f7dde7a]{color:#fff;font-size:%?60?%;line-height:%?86?%}",""]),n.exports=e},de80:function(n,e,t){var i=t("244a");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var o=t("967d").default;o("7886d81c",i,!0,{sourceMap:!1,shadowMode:!1})},e9a2:function(n,e,t){"use strict";var i=t("de80"),o=t.n(i);o.a},efc9:function(n,e,t){"use strict";var i=t("febc"),o=t.n(i);o.a},febc:function(n,e,t){var i=t("ceeb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);var o=t("967d").default;o("afed68f6",i,!0,{sourceMap:!1,shadowMode:!1})}}]);